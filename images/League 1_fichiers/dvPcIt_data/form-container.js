(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[4],{634:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var o={AD:"376",AE:"971",AF:"93",AG:"1",AI:"1",AL:"355",AM:"374",AO:"244",AR:"54",AT:"43",AU:"61",AW:"297",AX:"358",AZ:"994",BA:"387",BB:"1",BD:"880",BE:"32",BF:"226",BG:"359",BH:"973",BI:"257",BJ:"229",BM:"1",BN:"673",BO:"591",BR:"55",BS:"1",BT:"975",BW:"267",BY:"375",BZ:"501",CA:"1",CD:"243",CF:"236",CG:"242",CH:"41",CI:"225",CL:"56",CM:"237",CN:"86",CO:"57",CR:"506",CU:"53",CV:"238",CY:"357",CW:"599",CZ:"420",DE:"49",DJ:"253",DK:"45",DM:"1",DO:"1",DZ:"213",EC:"593",EE:"372",EG:"20",ER:"291",ES:"34",ET:"251",FI:"358",FJ:"679",FK:"500",FM:"691",FO:"298",FR:"33",GA:"241",GB:"44",GD:"1",GE:"995",GG:"44",GH:"233",GI:"350",GM:"220",GN:"224",GQ:"240",GR:"30",GT:"502",GW:"245",GY:"592",HK:"852",HN:"504",HR:"385",HT:"509",HU:"36",ID:"62",IE:"353",IL:"972",IM:"44",IN:"91",IQ:"964",IR:"98",IS:"354",IT:"39",JE:"44",JM:"1",JO:"962",JP:"81",KE:"254",KG:"996",KH:"855",KM:"269",KN:"1",KP:"850",KR:"82",KW:"965",KY:"1",KZ:"7",LA:"856",LB:"961",LC:"1",LI:"423",LK:"94",LR:"231",LS:"266",LT:"370",LU:"352",LV:"371",LY:"218",MA:"212",MC:"377",MD:"373",ME:"382",MG:"261",MK:"389",ML:"223",MM:"95",MN:"976",MO:"853",MR:"222",MS:"1",MT:"356",MU:"230",MV:"960",MW:"265",MX:"52",MY:"60",MZ:"258",NA:"264",NE:"227",NG:"234",NI:"505",NL:"31",NO:"47",NP:"977",NZ:"64",OM:"968",PA:"507",PE:"51",PF:"689",PG:"675",PH:"63",PK:"92",PL:"48",PR:"1",PS:"970",PT:"351",PW:"680",PY:"595",QA:"974",RE:"262",RO:"40",RS:"381",RU:"7",RW:"250",SA:"966",SB:"677",SC:"248",SD:"249",SE:"46",SG:"65",SH:"290",SI:"386",SK:"421",SL:"232",SM:"378",SN:"221",SO:"252",SR:"597",ST:"239",SV:"503",SY:"963",SZ:"268",TC:"1",TD:"235",TG:"228",TH:"66",TJ:"992",TL:"670",TM:"993",TN:"216",TO:"676",TR:"90",TT:"1",TW:"886",TZ:"255",UA:"380",UG:"256",US:"1",UY:"598",UZ:"998",VC:"1",VE:"58",VG:"1",VN:"84",VU:"678",WS:"685",YE:"967",ZA:"27",ZM:"260",ZW:"263"},r=function(e){return o[e]||""},i=function(e,t){return t.replace("+".concat(r(e)),"")},a=function(){return Object.keys(o)}},697:function(e,t){e.exports=function(e){var t=e.node;return{setSelection:function(e,n){if(void 0===n&&"number"==typeof e?n=e:void 0===n&&(n=e.end,e=e.start),void 0!==t.selectionStart)t.selectionStart=e,t.selectionEnd=n;else{var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}},getSelection:function(){var e,n;if(void 0!==t.selectionStart)e=t.selectionStart,n=t.selectionEnd;else{var o=document.selection.createRange();null==o&&(e=n=0);var r=t.createTextRange(),i=r.duplicate();r.moveToBookmark(o.getBookmark()),i.setEndPoint("EndToEnd",r),n=i.text.length,i.setEndPoint("EndToStart",r),e=i.text.length}return{start:e,end:n}}}}},732:function(e,t,n){"use strict";n.r(t);var o=n(50),r=n(9),i=n(0),a=n.n(i),c=n(10),l=n(4),s=n.n(l),u=n(25),p=n(88),d=n.n(p),h=n(213),m=n(234),f=n(7),b=n.n(f),v=n(212),g=n.n(v),y=n(80),k=n(47),C=n.n(k),w=n(22),O=n.n(w),E=n(714),j=n.n(E),x=n(75),S=n.n(x),P=n(63),I=n.n(P),A=n(210),R=n.n(A),F=n(122),D=n.n(F),N=n(65),T=n(36),B=n(219),L=n.n(B),M=function(e){var t=e.centered,n=e.fullWidth,o=e.isComplete,i=e.isLivePreview,c=e.isPaymentBlockAnswered,l=e.isReviewModeEnabled,s=e.isSubmitting,u=e.onClick,p=e.price,d=e.size,h=e.t,m=e.theme,f=h("label.button.submit");l?f=h("label.button.review"):c&&(f=h("label.button.submitAndPay",{price:p}));var b=l?"rgba(153, 0, 0, 0.6)":m.colors.button,v=Object(r.j)()||t?"":Object(T.a)(h("label.buttonHint.default")),g=l?"review-mode-button deep-purple-review-mode-button":"submit-button deep-purple-submit-button";return a.a.createElement(L.a,{size:d,content:f,color:b,contextBackgroundColor:m.colors.background,helperText:v,helperColor:m.colors.primary,dataQa:g,onClick:u,centered:t,fullWidth:n,isTransparent:m.hasTransparentButton&&!l,isSpinning:!i&&s,disabled:!i&&(s||o)})};M.defaultProps={centered:!1,size:"large",theme:{colors:{},hasTransparentButton:!1},t:function(e){return e}};var _=Object(N.a)(M),z=n(624),V=function(e){var t=e.backgroundColor,n=e.buttonColor,o=e.helperColor,i=e.helperText,c=e.hideIcon,l=e.label,s=e.onClick,u=e.isVisible,p=e.t,d=u?"-visible":"";return a.a.createElement(L.a,{size:"medium",content:Object(T.a)(p(l)),color:n,contextBackgroundColor:t,helperText:!Object(r.j)()&&Object(T.a)(p(i)),helperColor:o,onClick:s,iconSvg:c?null:z.a,dataQa:"ok-button".concat(d," deep-purple-ok-button").concat(d)})};V.defaultProps={backgroundColor:r.b,buttonColor:r.b,helperColor:r.b,helperText:"label.buttonHint.default",hideIcon:!1,isVisible:!1,label:"label.button.ok",t:function(e){return e}};var H=V,W=c.c.a.withConfig({displayName:"RetryLink__Link",componentId:"gd74g9-0"})(["color:",";cursor:",";margin-left:5px;opacity:",";text-decoration:underline;"],function(e){return e.color},function(e){return e.disabled?"default":"pointer"},function(e){return e.disabled?.3:1}),K=function(e){var t=e.color,n=e.isEnabled,o=e.onClick,r=e.timeout,i=e.t;return 0===r?a.a.createElement("div",null,i("label.retryLink.retrying")):a.a.createElement("div",null,i("label.retryLink.counter",{timeout:r}),a.a.createElement(W,{color:t,disabled:!n,title:i("label.retryLink.title"),onClick:o},i("label.retryLink.title")))};K.defaultProps={t:function(e){return e}};var q=Object(N.a)(K),Y=function(e){var t=e.color,n=e.t,o=e.messageKey,r=e.actionLink;return a.a.createElement(S.a,{size:"sizeN1",color:t,useDefaultFont:!0},o&&Object(T.a)(n(o)),r)};Y.defaultProps={t:function(e){return e}};var U=Object(N.a)(Y),G=n(45),Q=function(e){var t=e.visible,n=e.timeout,o=e.color,r=e.onRetryClick;return t?a.a.createElement(I.a,{top:2},a.a.createElement(U,{messageKey:"label.warning.slowSubmission",color:o,actionLink:a.a.createElement(q,{color:o,isEnabled:0!==n,onClick:r,timeout:n})})):null};Q.defaultProps={onRetryClick:G.a};var X=Q,Z=function(e){var t=e.visible,n=e.centered,o=e.color,r=e.warningText,i=e.actionText;return t&&a.a.createElement(D.a,{position:n?"center":"left"},a.a.createElement(I.a,{top:2},a.a.createElement(S.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},r," - ",a.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},i))))},J=a.a.createContext(0),$=function(e){var t=Object(i.useContext)(J),n=Object(i.useState)(t),o=d()(n,2),r=o[0],a=o[1];t!==r&&(a(t),setTimeout(e,0))},ee=a.a.createContext(!1);function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.boundingClientRect,o=void 0===n?{}:n,r=t.onlyTop,i=void 0!==r&&r,a=t.offsetTop,c=void 0===a?0:a,l=t.offsetBottom,s=void 0===l?0:l;if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var u=e.getBoundingClientRect(),p=o.height||window.innerHeight||document.documentElement.clientHeight,d=o.top||0,h=u.top>=d+c,m=u.bottom<=p-s;return i?h:h&&m}var ne=c.c.div.withConfig({displayName:"block-button__Root",componentId:"sc-1hcz453-0"})(["position:relative;"]),oe=c.c.div.withConfig({displayName:"block-button__ButtonWrapper",componentId:"sc-1hcz453-1"})(["position:absolute;"]),re=function(e){var t=e.blockRef,n=e.buttonText,o=e.helperText,r=e.hideIcon,c=e.invalidAnswersAmount,l=e.isAnimated,s=e.isButtonFullWidth,u=e.isLivePreview,p=e.isPaymentBlockAnswered,d=e.isReviewModeEnabled,h=e.isButtonTypeSubmit,m=e.isVisible,f=e.layoutItemsSize,b=e.onClick,v=e.onRequireStickyFooter,g=e.price,y=e.resetRetryCount,k=e.showPhishingMessage,C=e.submit,w=e.submitForm,O=e.t,E=e.theme,j=e.trackInlineSubmit,x=Object(i.useRef)(null),S=Object(i.useContext)(ee),P=function(){if(x.current){var e=te(x.current,f),n=!m||e;if(!e&&m){if(S)return;v(t,!0)}else n&&v(t,!1)}};$(function(){m&&P()}),Object(i.useEffect)(function(){P()},[S]),Object(i.useEffect)(function(){m&&h&&j()},[m,h]);var I=a.a.createElement(ne,null,a.a.createElement(oe,{ref:x,"data-qa-button-visible":m},h?a.a.createElement(i.Fragment,null,a.a.createElement(D.a,{position:s?"center":"left"},a.a.createElement(M,{centered:s,fullWidth:s,isComplete:C.isComplete,isLivePreview:u,isPaymentBlockAnswered:p,isReviewModeEnabled:d&&c>0,isSubmitting:C.isSubmitting,onClick:b,price:g,size:"medium",t:O,theme:E})),a.a.createElement(Z,{color:E.colors.primary,warningText:O("label.warning.phishing"),actionText:O("label.action.phishing"),visible:k,centered:s}),a.a.createElement(X,{timeout:C.retry.timeout,visible:C.retry.showMessage,color:E.colors.primary,onRetryClick:function(){y(),w()}})):a.a.createElement(H,{backgroundColor:E.colors.background,blockRef:t,buttonColor:E.colors.button,helperColor:E.colors.primary,helperText:o,hideIcon:r,isVisible:m,label:n,layoutItemsSize:f,onClick:b,onRequireStickyFooter:v,t:O})));return l?a.a.createElement(R.a,{type:"slideUp",isVisible:m,delay:0,duration:100},I):I},ie=Object(N.a)(re);re.defaultProps={isAnimated:!0,showPhishingMessage:!0,submit:{retry:{},isComplete:!1,isSubmitting:!1},onRequireStickyFooter:G.a,submitForm:G.a,theme:{colors:{primary:r.b,background:r.b}},t:function(e){return e}};var ae=n(11),ce=n(17),le=n(14),se=n(56),ue=n(6),pe=n(16),de=n(102),he={onRequireStickyFooter:u.o,resetRetryCount:u.q,reviewForm:u.g,submitForm:u.w,trackInlineSubmit:u.A},me=Object(o.b)(function(e,t){var n=t.blockRef,o=t.isVisible,r=!Object(ae.j)(e)&&Object(ae.n)(e);return{submit:Object(se.g)(e),showPhishingMessage:Object(pe.d)(e),isLivePreview:Object(ae.l)(e),isPaymentBlockAnswered:Object(ce.r)(e),isReviewModeEnabled:r,isButtonTypeSubmit:Object(le.m)(e,n),isVisible:o||Object(ae.p)(e,n),invalidAnswersAmount:Object(ce.n)(e),theme:Object(de.e)(e),price:Object(ue.qb)(e)}},he)(ie),fe=n(639),be=n.n(fe),ve=n(64),ge=function(e,t){return"".concat(e).concat("lg"===t?"Desktop":"Mobile")},ye=n(15),ke=Object(c.d)(["20%{transform:translateX(3px);}80%{transform:translateX(-3px);}"]),Ce=Object(c.b)(["animation:"," 0.15s cubic-bezier(0.36,0.07,0.19,0.97) both infinite;"],ke),we=c.c.section.withConfig({displayName:"Container__Section",componentId:"sc-1blfuhz-0"})(["height:100%;width:100%;z-index:",";position:relative;",";",";@media print{page-break-inside:avoid;opacity:1;}"],function(e){return e.isActive?ye.j.level1:ye.j.level0},function(e){return e.isShaking&&Ce},function(e){return e.isVisible?"":"visibility: hidden;"}),Oe=function(e){var t=e.blockRef,n=e.isActive,o=e.isShaking,r=e.isVisible,i=e.children,c=e.dataQa,l=e.innerRef;return a.a.createElement(we,O()({id:"block-".concat(t),isActive:n,isShaking:o,isVisible:r,"data-js-activable-item":!0},n&&{"data-qa-focused":!0},{"data-qa-blockref":t,"data-qa-block":!0,"data-qa":c,ref:l}),i)},Ee=n(35),je=n.n(Ee),xe=n(42),Se=n.n(xe),Pe=n(44),Ie=n.n(Pe),Ae=n(40),Re=n.n(Ae),Fe=n(23),De=n.n(Fe),Ne=n(43),Te=n.n(Ne),Be=n(638),Le=n.n(Be),Me=n(158),_e=n.n(Me),ze=c.c.fieldset.withConfig({displayName:"A11yContainer__Fieldset",componentId:"ejane9-0"})(["border:0;padding:0.01em 0 0;margin:0;min-width:0;"]);ze.displayName="fieldset";var Ve=function(e){var t=e.children,n=e.isFieldset?ze:i.Fragment;return a.a.createElement(n,null,t)},He=c.c.legend.withConfig({displayName:"A11yTitle__Legend",componentId:"gex6e0-0"})(["width:1px;height:1px;overflow:hidden;display:block;"]),We=function(e){var t=e.children,n=e.id,o=e.htmlTag;return"legend"===o?a.a.createElement("span",null,a.a.createElement(He,null,t),a.a.createElement("span",{"data-qa":"block-title deep-purple-block-title"},t)):a.a.createElement(_e.a,{type:"title",htmlTag:o,htmlFor:n,"data-qa":"block-title deep-purple-block-title"},t)};We.defaultProps={htmlTag:"span"};var Ke=We,qe=c.c.div.withConfig({displayName:"ErrorMessage__ErrorWrapper",componentId:"zg4jt9-0"})(["pointer-events:none;border-radius:3px;position:absolute;padding:4px 8px;background-color:rgba(153,0,0,0.6);color:#fff;"]),Ye=function(e){var t=e.id,n=e.visible,o=e.validations,r=e.t;return null==t?null:a.a.createElement(R.a,{isVisible:n,type:"slideUp",duration:300},a.a.createElement(qe,null,a.a.createElement(S.a,{size:"sizeN1",color:"#FFFFFF",dataQa:"error-message".concat(n?"-visible":""),useDefaultFont:!0},Object(T.a)(r(t,function(e,t){switch(e){case"label.error.minValue":return{min_value:t.minValue.minValue-1};case"label.error.maxValue":return{max_value:t.maxValue.maxValue+1};case"label.error.range":return{max_value:t.range.maxValue,min_value:t.range.minValue}}return{}}(t,o))))))};Ye.defaultProps={visible:!1,id:"label.error.required",t:function(e){return e}};var Ue=Object(N.a)(Ye),Ge=n(215),Qe=n(12),Xe=n(103),Ze=200,Je=c.c.div.withConfig({displayName:"block-structure__ButtonErrorSpace",componentId:"sc-4tm7ct-0"})(["height:48px;"]),$e=c.c.div.withConfig({displayName:"block-structure__AttachmentWrapper",componentId:"sc-4tm7ct-1"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:column;margin-top:32px;will-change:opacity;"]),et=c.c.div.withConfig({displayName:"block-structure__QuestionHeaderWrapper",componentId:"sc-4tm7ct-2"})(["will-change:opacity;"]),tt=c.c.div.withConfig({displayName:"block-structure__Root",componentId:"sc-4tm7ct-3"})([""]),nt=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).handleAttachmentLoaded=n.handleAttachmentLoaded.bind(De()(n)),n.state={maxAttachmentHeight:Ze},n.calculatedAttachmentHeight=!1,n}return Te()(t,e),Se()(t,[{key:"componentWillUpdate",value:function(){this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"calculateMaxImageHeight",value:function(){var e=Ze;this.props.attachment&&this.blockNode&&this.thisNode&&this.attachmentRef&&this.props.layoutItemsSize.boundingClientRect.height&&(e=function(e,t,n,o,r){var i=0;e===Qe.a.multipleChoice&&(i=r-95);var a=t-(n-o-i);return Math.max(a,Ze)}(this.props.type,this.props.layoutItemsSize.boundingClientRect.height,this.thisNode.clientHeight,this.attachmentRef.clientHeight,this.blockNode.clientHeight),this.calculatedAttachmentHeight=!0,this.setState({maxAttachmentHeight:e}))}},{key:"handleAttachmentLoaded",value:function(){this.props.isLivePreview&&(this.calculatedAttachmentHeight=!1),this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"render",value:function(){var e=this,t=this.props,n=t.attachment,o=t.childOfGroup,r=t.children,i=t.customError,c=t.description,l=t.descriptionComponent,s=void 0===l?rt:l,u=t.hideError,p=t.isActive,d=t.isCommitted,h=t.isValid,m=t.questionHeaderWrapperComponent,f=void 0===m?et:m,b=t.layoutKind,v=t.listIndexText,g=t.noOkButton,y=t.theme,k=t.title,C=t.titleComponent,w=void 0===C?ot:C,E=t.titleCounterIcon,j=t.useFieldset,x=t.validationError,S=t.validations,P="string"==typeof k?k:k&&k.text;return a.a.createElement(tt,{ref:function(t){return e.thisNode=t}},a.a.createElement(Ve,{isFieldset:j},n&&b===Xe.a.FLOAT.MOBILE&&a.a.createElement($e,{innerRef:function(t){return e.attachmentRef=t}},a.a.createElement(I.a,{bottom:4},a.a.createElement(Ge.a,O()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!p,isVisible:p})))),a.a.createElement(f,{ref:function(t){return e.headerNode=t}},a.a.createElement(Le.a,{title:a.a.createElement(w,{value:P,htmlFor:k.for,type:k.type}),titleSize:"size2",color:y.colors&&y.colors.primary,required:S&&S.required,counterIcon:o&&v?null:E,counterColor:y.colors&&y.colors.secondary,counterContent:o&&v?"".concat(v,"."):v}),c&&a.a.createElement(I.a,{top:1},a.a.createElement(_e.a,{type:"description",color:y.colors&&y.colors.primary,htmlTag:"p",dataQa:"block-description"},a.a.createElement(s,{value:c})))),n&&("stackDesktop"===b||"stackMobile"===b)&&a.a.createElement($e,{ref:function(t){return e.attachmentRef=t}},a.a.createElement(I.a,{top:4},a.a.createElement(Ge.a,O()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!p,isVisible:p})))),a.a.createElement("div",{ref:function(t){return e.blockNode=t}},r,a.a.createElement(Ue,{id:i||x,visible:(!!i||d&&!h)&&!u,validations:S}),!g&&a.a.createElement(Je,null))))}}]),t}(i.Component),ot=function(e){var t=e.htmlFor,n=e.type,o=e.value;return a.a.createElement(Ke,{id:t,htmlTag:n},Object(T.a)(o,{allowHyperlinks:!0}))},rt=function(e){var t=e.value;return a.a.createElement(i.Fragment,null,Object(T.a)(t,{allowHyperlinks:!0}))};nt.defaultProps={hideError:!1,layoutItemsSize:{},recenter:G.a,theme:{colors:{primary:r.b}},title:"",titleCounterIcon:"arrow",useFieldset:!1,validations:{}};var it=nt,at=n(623),ct=n(636),lt=n.n(ct),st=function(e,t){var n=Object(i.useState)(e),o=d()(n,2),r=o[0],a=o[1],c=Object(i.useRef)(Date.now());return Object(i.useEffect)(function(){var n,o=t-(Date.now()-c.current),r=function(){Date.now()-c.current>=t&&(a(e),c.current=Date.now())};return o>0?n=setTimeout(function(){r()},o):r(),function(){clearTimeout(n)}},[e,t]),r},ut=88,pt=c.c.div.withConfig({displayName:"block-scroller__Root",componentId:"sc-23jz1-0"})(["width:100%;height:100%;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:auto;"]),dt=c.c.div.withConfig({displayName:"block-scroller__CenterWrapper",componentId:"sc-23jz1-1"})(["min-height:100%;display:flex;flex-direction:column;justify-content:center;"]),ht=function(e){var t=e.children,n=e.endAutoScroll,o=e.isActive,r=e.onChangeCanSwipe,c=e.onRequireStickyHeader,l=e.isScrollNearTop,s=e.scrolling,u=Object(i.useRef)(),p=Object(i.useState)(0),m=d()(p,2),f=m[0],b=m[1],v=st(f,250),g=Object(i.useContext)(ee),y=function(){return!!u.current&&u.current.scrollTop-30<=0},k=function(){o&&r({next:!!u.current&&u.current.scrollTop+30>=u.current.scrollHeight-u.current.clientHeight,previous:y()})};return Object(i.useEffect)(function(){o||g||!y()&&u.current&&(u.current.scrollTop=0),k()},[g,o]),Object(i.useEffect)(function(){if(o&&s&&"recenter"===s.scrollType&&"bottom"===s.anchor&&u.current){var e=h.a?0:200;lt()(u.current,"scrollTop",u.current.scrollHeight-u.current.clientHeight,e,"easeOutCubic",n)}},[s]),a.a.createElement(J.Provider,{value:v},a.a.createElement(pt,{ref:u,onScroll:function(){if(u.current){var e=u.current.scrollTop;k(),b(u.current.scrollTop),e>ut&&l?c(!0):e<=ut&&!l&&c(!1)}},"data-qa":"block-scroller"},a.a.createElement(dt,null,t)))};ht.defaultProps={endAutoScroll:G.a,onChangeCanSwipe:G.a};var mt,ft=ht,bt=c.c.div.withConfig({displayName:"block-layout__Root",componentId:"sc-1r8zsy7-0"})(["display:flex;height:100%;position:relative;"]),vt=c.c.div.withConfig({displayName:"block-layout__HalfLayout",componentId:"sc-1r8zsy7-1"})(["display:flex;height:100%;"]),gt=c.c.div.withConfig({displayName:"block-layout__HalfSpacer",componentId:"sc-1r8zsy7-2"})(["flex:0 0 50%;"]),yt=c.c.div.withConfig({displayName:"block-layout__HalfContainer",componentId:"sc-1r8zsy7-3"})(["width:50%;"]),kt=function(e){var t=e.children;return a.a.createElement(vt,null,a.a.createElement(yt,null,a.a.createElement(at.a,null,a.a.createElement(I.a,{top:6,bottom:6},t))),a.a.createElement(gt,null))},Ct=c.c.div.withConfig({displayName:"block-layout__SplitMobileWrapper",componentId:"sc-1r8zsy7-4"})(["display:flex;flex-direction:column;height:100%;flex:1;"]),wt=c.c.div.withConfig({displayName:"block-layout__SplitMobileContentWrapper",componentId:"sc-1r8zsy7-5"})(["flex:1;"]),Ot=c.c.div.withConfig({displayName:"block-layout__AttachmentWrapper",componentId:"sc-1r8zsy7-6"})(["height:30vh;"]),Et=function(e){var t=e.children;return a.a.createElement(at.a,null,a.a.createElement(I.a,{top:6,bottom:6},t))},jt=(mt={},b()(mt,Xe.a.STACK.DESKTOP,Et),b()(mt,Xe.a.STACK.MOBILE,Et),b()(mt,Xe.a.FLOAT.MOBILE,Et),b()(mt,Xe.a.FLOAT.DESKTOP,kt),b()(mt,Xe.a.SPLIT.DESKTOP,kt),b()(mt,Xe.a.SPLIT.MOBILE,function(e){var t=e.attachment,n=e.children,o=e.focalPoint;return a.a.createElement(Ct,null,a.a.createElement(Ot,null,a.a.createElement(Ge.a,O()({},t,{focalPoint:o,cover:!0}))),a.a.createElement(wt,null,a.a.createElement(at.a,null,a.a.createElement(I.a,{top:6,bottom:6},n)),a.a.createElement(gt,null)))}),b()(mt,Xe.a.WALLPAPER.DESKTOP,Et),b()(mt,Xe.a.WALLPAPER.MOBILE,Et),mt),xt=function(e){var t=e.attachment,n=e.children,o=e.endAutoScroll,r=e.focalPoint,i=e.isActive,c=e.isScrollNearTop,l=e.layoutKind,s=e.onChangeCanSwipe,u=e.onRequireStickyHeader,p=e.scrolling,d=jt[l]||Et;return a.a.createElement(bt,null,a.a.createElement(ft,{endAutoScroll:o,isActive:i,onChangeCanSwipe:s,onRequireStickyHeader:u,isScrollNearTop:c,scrolling:p},a.a.createElement(d,{attachment:t,focalPoint:r},n)))};xt.defaultProps={endAutoScroll:G.a,onChangeCanSwipe:G.a};var St=xt,Pt={x:0,y:0},It=function(e){var t=e.attachment,n=e.blockRef,o=e.children,r=e.endAutoScroll,i=e.forceBreakpoint,c=e.goToNextBlock,l=e.goToPreviousBlock,s=e.isActive,u=e.isAnswered,p=e.isScrollNearTop,d=e.isShaking,h=e.isVisible,m=e.layout,f=e.onChangeCanSwipe,b=e.onRequireStickyHeader,v=e.scrolling,g=e.theme,y=e.type,k=Object(ve.useBreakpoint)();i&&(k=i);var C=ge(m.type,k),w=be()(Pt,["attachment","properties","focalPoint"],m);return a.a.createElement(Oe,{isActive:s,isVisible:h,isAnswered:u,isShaking:s&&d,blockRef:n,dataQa:"blocktype-".concat(y," deep-purple-blocktype-").concat(y)},a.a.createElement(St,{attachment:t,endAutoScroll:r,focalPoint:w,goToNextBlock:c,goToPreviousBlock:l,isActive:s,isScrollNearTop:p,layoutKind:C,onChangeCanSwipe:f,onRequireStickyHeader:b,scrolling:v,theme:g},a.a.createElement(it,O()({},e,{layoutKind:C}),o)))};It.defaultProps={layout:{type:"stack"}};var At=It,Rt=n(101);function Ft(e,t){return e.keyCode===Rt.a.ARUP&&0!==t}function Dt(e,t,n){return e.keyCode===Rt.a.ARDOWN&&t!==n.value.length}function Nt(e){return e.keyCode===Rt.a.ENTER||e.which===Rt.a.ENTER}var Tt=function(e,t,n){return Qe.a.number!==e||function(e){return(e.ctrlKey||e.metaKey)&&("v"===e.key||"c"===e.key||"z"===e.key)}(n)||Nt(n)||function(e){var t=e.which;return Rt.a.NUM_0<=t&&t<=Rt.a.NUM_9}(n)?e===Qe.a.number&&t&&t<=n.target.value.length&&!Nt(n)?(n.preventDefault(),{blocked:!0}):e===Qe.a.shortText&&t&&t<=n.target.value.length&&!Nt(n)?(n.preventDefault(),{blocked:!0}):e===Qe.a.longText&&t&&t<=n.target.value.length&&!Nt(n)?(n.preventDefault(),{blocked:!0}):{blocked:!1}:(n.preventDefault(),{blocked:!0})},Bt=function(e,t){var n=function(e,t,n){var o;try{o=n&&n.selectionStart}catch(e){}return void 0!==o&&e.some(function(e){return e(t,o,n)})}([Ft,Dt,Nt],t.nativeEvent,t.target);Qe.a.number===e&&function(e){return e.key===Rt.a.DEAD||e.keyIdentifier===Rt.a.UNIDENTIFIED}(t)&&t.preventDefault(),n&&t.stopPropagation()},Lt="center",Mt="bottom",_t=n(157),zt=function(e,t){return e.isActive||t.isActive||e.isCommitted!==t.isCommitted||e.layoutItemsSize!==t.layoutItemsSize},Vt=function(e,t){return!zt(e,t)},Ht=550;var Wt=function(e,t,n){var o=function(e){return"undefined"!=typeof window&&"undefined"!=typeof document&&document.activeElement===e}(e),a=function(){!o&&t&&e&&!Object(r.j)()&&te(e,n)&&e.focus()};return Object(i.useEffect)(function(){setTimeout(a,Ht)},[e,n,t]),$(a),o},Kt=function(e){var t=Object(i.useState)(!1),n=d()(t,2),o=n[0],r=n[1],a=Object(i.useRef)();return[o,function(t){r(t),clearTimeout(a.current),t&&(a.current=setTimeout(function(){return r(!1)},e))}]};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var Yt=700,Ut=function(e){var t=e.blockRef,n=e.isActive,o=e.isCommitButtonVisible,c=e.isFocused,l=e.layoutItemsSize,s=e.onCommitAnswer,u=e.onInputBlur,p=e.onInputFocus,h=e.onRequireStickyFooter,m=e.onStageAnswer,f=e.placeholder,v=e.recenter,g=e.t,y=e.theme,k=e.title,C=e.type,w=e.validations,E=Kt(600),x=d()(E,2),P=x[0],A=x[1],R=Object(i.useState)(),F=d()(R,2),D=F[0],N=F[1],B=Wt(D,c,l),L="stkv-text-".concat(t);function M(e){if(n){var o=e.target.value;w.maxLength&&(o=o.slice(0,w.maxLength)),m(t,o)}}var _=e.value.length>0?e.value[0]:"",z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{title:{text:k,for:L,type:"label"}});return a.a.createElement(At,O()({isShaking:P},z),a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement(j.a,{placeholder:g(f),maxLength:w.maxLength,onChange:M,onResize:function(e){M(e),n&&!Object(_t.a)()&&v(Mt,Lt,!0)},onKeyDown:function(e){var o=!!e.shiftKey;Bt(C,e),Object(r.j)()||e.nativeEvent.keyCode!==Rt.a.ENTER||o||(D&&D.blur(),e.stopPropagation(),n&&s(t))},onKeyPress:function(e){Tt(C,w.maxLength,e).blocked&&A(!0)},onFocus:function(){Object(r.j)()&&(p(),Object(_t.a)()||setTimeout(function(){v(Mt)},Yt))},onBlur:u,innerRef:N,id:L,value:_,color:y.colors.secondary}),!Object(r.j)()&&a.a.createElement(I.a,{top:2},a.a.createElement(S.a,{color:y.colors.secondary,fontWeight:"regular",htmlTag:"p",size:"sizeN2"},Object(T.a)(g("block.longText.hint"))))),a.a.createElement(me,{buttonColor:y.colors.button,helperColor:y.colors.primary,backgroundColor:y.colors.background,onRequireStickyFooter:h,blockRef:t,onClick:function(e){var o=B&&Object(r.j)();D&&o&&D.blur(),e.stopPropagation(),setTimeout(function(){n&&s(t)},o?Yt:0)},isVisible:o,layoutItemsSize:l}))};Ut.defaultProps={onCommitAnswer:G.a,onStageAnswer:G.a,recenter:G.a,t:G.a,theme:{colors:{backgroundColor:r.b,button:r.b,primary:r.b,secondary:r.b}},validations:{maxLength:null},value:[]};var Gt=Object(i.memo)(Ut,Vt),Qt=n(621),Xt=n.n(Qt),Zt=n(697);var Jt=function(e){var t=[40,37,39,38,32,8,13,46,9],n=[48,49,50,51,52,53,54,55,56,57],o=[96,97,98,99,100,101,102,103,104,105],r=!e;return function(e,i,a,c,l,s){if(a=function(e){return" "+e+" "}(a||"-"),i=i||"YYYYMMDD",l=l||!1,!e)return!1;var u="",p=[0,0,0],d=e,h=d.value,m={d:-1,m:-1,y:-1},f=a.length,b="DD".length+f+"MM".length+f+"YYYY".length,v=[],g="",y=function(e,t,n,o){var r=e.addEventListener?"addEventListener":"attachEvent";e[r]("attachEvent"===r?"on".concat(t):t,n,o)},k=function(e,t,n){n=n||u;var o=h.split(a),r=o[m[n]],i=parseInt(r,10),l=(new Date).toISOString();if("reset"===e)switch(n){case"d":r=c.substring(v[m.d][0],v[m.d][1]);break;case"m":r=c.substring(v[m.m][0],v[m.m][1]);break;case"y":r=c.substring(v[m.y][0],v[m.y][1])}else if("overwrite"===e&&"number"==typeof t){if("y"===n){var s=/[^0-9]/g;s.test(r)&&(r=r.replace(s,"0")),r=r.substr(1,3)+t}else 0===i&&0===t?r="01":0===p[m[n]]&&t>=0<=3?r=t:"d"===n&&i<=3||"m"===n&&i<=1?(r=r.charAt(1),("d"===n&&3===i&&t>1||"m"===n&&1===i&&t>2)&&(t="d"===n?1:2),r+=t.toString()):r=t;p[m[n]]++}else if("number"==typeof t&&isNaN(i))switch(n){case"d":r=parseInt(l.substring(8,10),10);break;case"m":r=parseInt(l.substring(5,7),10);break;case"y":r=parseInt(l.substring(0,4),10)}else{if("number"!=typeof t)return;r=i+t,("d"===n&&32===r||"m"===n&&13===r)&&(r=1),"d"===n&&0===r&&(r=31),"m"===n&&0===r&&(r=12)}((r=r.toString()).length<2||"y"===n&&r.length<4)&&(r=R(r)+r),o[m[n]]=r,L(P(o[0],o[1],o[2])),T(0)},C=function(){var e=void 0!==d.selectionStart?d.selectionStart:function(e){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}(d),t=j(),n=O(t);B(e>t&&e<=t+"MM".length+f?[t+f,t+"MM".length+f]:e>=n&&e<b?[n,b]:[0,t])},w=function(){var e="",t="";return S()?(t=P(i.substr(0,4),i.substr(4,2),i.substr(6,2)),e=P(c.substr(0,4),c.substr(5,2),c.substr(8,2))):(t=P(i.substr(0,2),i.substr(2,2),i.substr(4,4)),e=P(c.substr(0,2),c.substr(3,2),c.substr(6,4))),g=t,c=e},O=function(e){return b-(6-e)},E=function(e,t){e=e||!1,t=t||u;var n=h.split(a)[m[t]];return"default"===e?"DD"===n||"MM"===n||"YYYY"===n:n},j=function(){return S()?"YYYY".length:"DD".length},x=function(){var e;if(l)e=h;else{var t=h.split(a),n=t[m.y],o=t[m.m],r=t[m.d];e="".concat(n,"-").concat(o,"-").concat(r)}return e},S=function(){return"Y"===i.charAt(0)},P=function(e,t,n){return e+a+t+a+n},I=function(e){e.preventDefault();var i=e.keyCode,a=String.fromCharCode(i);if(t.indexOf(i)<0&&n.indexOf(i)<0&&o.indexOf(i)<0)return!1;switch(o.indexOf(i)>-1&&(i-=48,a=String.fromCharCode(i)),e.preventDefault?e.preventDefault():9===i&&(e.shiftKey&&0===m[u]||2===m[u])||(e.returnValue=!1),!0){case 38===i:k("inc",1);break;case 40===i:k("inc",-1);break;case 37===i:case 9===i&&e.shiftKey:T(-1,e);break;case 39===i:case 13===i:case 9===i:case 32===i:T(1,e);break;case 46===i:case 8===i:E("default")?T(-1):(k("reset",0),F());break;default:isNaN(parseInt(a,10))||(k("overwrite",parseInt(a,10)),r&&function(){var e=parseInt(E(),10);("d"===u&&e>3||"m"===u&&e>1||2===p[m[u]]&&"y"!==u||4===p[m[u]])&&T(1)}())}return!0},A=function(e){s(e.target.value)},R=function(e){var t="y"===u?"0000":"00";return t.substr(0,t.length-e.length)},F=function(e){p[m[e=e||u]]=0},D=function(){var e=["02","04","06","09","11"],t=parseInt(E(!1,"y"),10),n=E(!1,"m"),o=parseInt(E(!1,"d"),10),r=!isNaN(t)&&function(e){return 1===new Date(e,1,29).getMonth()}(t);isNaN(o)||e.indexOf(n)<0||o<29||("02"===n?o=r?29:28:o>30&&(o=30),k("overwrite",o,"d"),F("d"))},N=function(e){var t=new RegExp(" ","g");return e.replace(t,"")},T=function(e,t){var n=""!==u?m[u]+e:0+e;0!==e&&("0000"!==E()&&"00"!==E()||(k("reset"),k("overwrite",1)),F(),D()),r||2!==p[m[u]]||(p[m[u]]=0),n<0?n=0:n>2?n=2:t&&t.stopPropagation&&t.stopPropagation(),B(n)},B=function(e){var t;if(!Array.isArray(e)&&"number"!=typeof e)return console.error("invalid set to focus"),!1;t=Array.isArray(e)?e:v[e],u=g.substring(t[0],t[0]+1).toLowerCase(),d.setSelectionRange?d.setSelectionRange(t[0],t[1]):function(e,t,n){var o=Zt({node:e});o.setSelection(0),o.setSelection(t,n),o.setSelection({start:t,end:n}),o.getSelection()}(d,t[0],t[1])},L=function(e){e=e||w(),h=d.value=e;var t=x();s(t,function(e){return new Date(e).getTime()}(t))};return{focus:function(){l||(e.focus(),B([0,j()]))},blur:function(){l||e.blur()},destroy:function(){l?d.removeEventListener("change",A,!0):(d.removeEventListener("click",C,!0),d.removeEventListener("keydown",I,!0))},render:function(){return 8===i.length&&(function(){var e=a.length,t=j(),n=t+e,o=n+"MM".length,r=O(t);S()?(m.y=0,m.m=1,m.d=2):("M"===i.charAt(0)?(m.m=0,m.d=1):(m.d=0,m.m=1),m.y=2),v.push([0,t]),v.push([n,o]),v.push([r,b])}(),l?(d.setAttribute("min","0001-01-01"),d.setAttribute("max","9999-12-31"),d.setAttribute("data-placeholder",w()),y(d,"change",A,!0)):(d.setAttribute("onCut","return false;"),d.setAttribute("onPaste","return false;"),y(d,"click",C,!0),y(d,"keydown",I,!0)),L(),this)},value:function(e){return e?x():N(h)},setValue:L,test:{_keyBehaviour:I,_setFocusOnSubfield:T}}}},$t=function(e){function t(){var e;return je()(this,t),(e=Ie()(this,Re()(t).call(this))).handleFocus=e.handleFocus.bind(De()(e)),e.handleBlur=e.handleBlur.bind(De()(e)),e.handleRef=e.handleRef.bind(De()(e)),e.dateFieldFactory=Jt(),e.dateFieldInstance=null,e}return Te()(t,e),Se()(t,[{key:"enhanceInputWithDateLogic",value:function(){this.dateFieldInstance&&this.dateFieldInstance.destroy(),this.dateFieldInstance=null;var e=this.props,t=e.separator,n=e.structure,o=e.placeholder,r=e.onChange,i=this.dateFieldFactory(this.input,n,t,o,!1,function(e){return r({target:{value:e}})});this.dateFieldInstance=i.render()}},{key:"handleFocus",value:function(){this.dateFieldInstance.focus()}},{key:"handleBlur",value:function(){this.dateFieldInstance.blur()}},{key:"handleRef",value:function(e){this.input=e,this.props.getInputRef(e)}},{key:"componentDidMount",value:function(){this.enhanceInputWithDateLogic()}},{key:"componentDidUpdate",value:function(e){var t=e.separator!==this.props.separator,n=e.structure!==this.props.structure;(t||n||this.props.resetValue)&&this.enhanceInputWithDateLogic()}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.inputId,o=e.onChange,r=e.onKeyDown,i=e.onKeyPress,c=e.placeholder,l=e.value;return a.a.createElement(Xt.a,{value:l,inputId:n,color:t,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:o,onKeyDown:r,onKeyPress:i,placeholder:c,getRef:this.handleRef,type:"text"})}}]),t}(i.Component);$t.defaultProps={onChange:G.a,onKeyDown:G.a,onKeyPress:G.a};var en=$t;function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var nn=c.c.div.withConfig({displayName:"DateBlock__InputWrapper",componentId:"trp8gr-0"})(["position:relative;"]),on=c.c.input.withConfig({displayName:"DateBlock__GhostInput",componentId:"trp8gr-1"})(["position:absolute;width:100%;height:100%;top:0;opacity:0;min-width:100%;"]),rn={MMDDYYYY:"MM-DD-YYYY",DDMMYYYY:"DD-MM-YYYY",YYYYMMDD:"YYYY-MM-DD"},an={DD:"block.date.placeholder.day",MM:"block.date.placeholder.month",YYYY:"block.date.placeholder.year"},cn=function(e,t,n){var o=rn[e];return e&&t&&o?o.replace(/-/g,t).split(t).map(function(e){return n(an[e])}).join(t):""},ln=function(e){function t(){var e,n;je()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var a=(n=Ie()(this,(e=Re()(t)).call.apply(e,[this].concat(r)))).props,c=a.blockRef,l=a.structure,s=a.separator,u=a.t;return n.handleCommit=n.handleCommit.bind(De()(n)),n.handleChange=n.handleChange.bind(De()(n)),n.handleFocus=n.handleFocus.bind(De()(n)),n.handleBlur=n.handleBlur.bind(De()(n)),n.handleKeyDown=n.handleKeyDown.bind(De()(n)),n.inputId="stkv-text-".concat(c),n.state={isGhostInputFocused:!1,placeholder:cn(l,s,u)},n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){var e=this;this.updateInputFocus(this.dateInput,this.props.isFocused),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.dateInput,e.props.isFocused)})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.structure,o=t.separator,r=t.t;e.structure===n&&e.separator===o||this.setState({placeholder:cn(e.structure,e.separator,r)})}},{key:"shouldComponentUpdate",value:function(e){return zt(this.props,e)}},{key:"componentDidUpdate",value:function(){this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case Rt.a.ARDOWN:case Rt.a.ARUP:e.stopPropagation();break;case Rt.a.ENTER:this.handleCommit(e)}}},{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleChange",value:function(e){var t=this,n=e.target.value,o=n.replace(/[.-/]/gi,"");this.props.isActive&&this.props.onStageAnswer(this.props.blockRef,o.match(/[0-9]/gi)?n:""),Object(r.j)()&&!Object(_t.a)()&&n&&setTimeout(function(){t.props.isActive&&t.props.onCommitAnswer(t.props.blockRef),t.ghostInput.blur()},Ht)}},{key:"handleFocus",value:function(){Object(_t.a)()&&(this.setState({isGhostInputFocused:!0}),this.props.onInputFocus())}},{key:"handleBlur",value:function(){Object(_t.a)()&&(this.setState({isGhostInputFocused:!1}),this.props.onInputBlur())}},{key:"updateInputFocus",value:function(e,t){!Object(r.j)()&&t&&te(e,this.props.layoutItemsSize)&&e.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCommitButtonVisible,o=t.isFocused,i=t.structure,c=t.separator,l=t.value,s=void 0===l?[]:l,u=t.title,p=t.theme,d=t.t,h=t.onRequireStickyFooter,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{title:{text:u,for:this.inputId,type:"label"}}),f=this.state.placeholder,v=function(e,t,n){if(!e||!e[0])return"";var o=e[0].split("-");return t.replace(n(an.YYYY),o[0]).replace(n(an.MM),o[1]).replace(n(an.DD),o[2])}(s,f,d),g=Object(_t.a)()&&this.state.isGhostInputFocused;return a.a.createElement(At,m,a.a.createElement(I.a,{top:4,bottom:2},Object(r.j)()?a.a.createElement(nn,null,a.a.createElement(Xt.a,{placeholder:f,color:p.colors.secondary,value:v,onChange:G.a}),a.a.createElement(on,{type:"date",ref:function(t){return e.ghostInput=t},onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange})):a.a.createElement(en,{getInputRef:function(t){return e.dateInput=t},color:p.colors.secondary,placeholder:f,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,inputId:this.inputId,isFocused:o,structure:i,separator:c,resetValue:this.props.shouldClearInput})),a.a.createElement(me,{buttonColor:p.colors.button,helperColor:p.colors.primary,backgroundColor:p.colors.background,onRequireStickyFooter:h,blockRef:this.props.blockRef,onClick:this.handleCommit,isVisible:n&&!g,layoutItemsSize:this.props.layoutItemsSize}))}}]),t}(i.Component);ln.defaultProps={onCommitAnswer:G.a,onInputBlur:G.a,onInputFocus:G.a,onKeyDown:G.a,onKeyPress:G.a,onRequireStickyFooter:G.a,onStageAnswer:G.a,theme:{colors:{secondary:r.b}},t:G.a};var sn=n(5),un=n.n(sn),pn=n(37),dn=n.n(pn),hn=n(696),mn=n.n(hn),fn=n(211),bn=n.n(fn);function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yn=c.c.div.withConfig({displayName:"TopDownFocusable__Focusable",componentId:"w6x6xw-0"})(["outline:none;min-height:1px;margin-top:-1px;"]),kn=function(e){function t(){return je()(this,t),Ie()(this,Re()(t).apply(this,arguments))}return Te()(t,e),Se()(t,[{key:"tryFocus",value:function(){var e=this.topFocusableRef&&this.bottomFocusableRef&&this.focusableRef,t=document.activeElement===this.focusableRef||document.activeElement===this.topFocusableRef||document.activeElement===this.bottomFocusableRef,n=te(this.topFocusableRef,gn({},this.props.layoutItemsSize)),o=te(this.bottomFocusableRef,gn({},this.props.layoutItemsSize));return!!t||!!e&&(n?(this.topFocusableRef.focus(),!0):!!o&&(this.bottomFocusableRef.focus(),!0))}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.tryFocus()},600)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.shouldFocus&&(this.tryFocus()||setTimeout(function(){return e.tryFocus()},600))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onKeyDown,o=t.children;return a.a.createElement(yn,{tabIndex:"-1",ref:function(t){return e.focusableRef=t},onKeyDown:n,"data-qa":"focusable"},a.a.createElement(yn,{tabIndex:"-1",ref:function(t){return e.topFocusableRef=t}}),o,a.a.createElement(yn,{tabIndex:"-1",ref:function(t){return e.bottomFocusableRef=t}}))}}]),t}(i.Component),Cn=n(142),wn=function(e){var t=e.color;return a.a.createElement("svg",{height:"50px",width:"50px",viewBox:"0 0 50 50"},a.a.createElement("g",{fill:t,fillRule:"nonzero"},a.a.createElement("path",{d:"M25 0a25 25 0 1 0 0 50 25 25 0 0 0 0-50zm0 46a21 21 0 1 1 0-42 21 21 0 0 1 0 42z"}),a.a.createElement("path",{d:"M35 23h-8v-8h-4v8h-8v4h8v8h4v-8h8v-4z"})))},On=Object(c.d)(["from{opacity:0;}to{opacity:1;}"]),En=Object(c.b)(["animation:"," 0.8s ease forwards;"],On),jn=c.c.div.withConfig({displayName:"DropArea__Root",componentId:"sc-1htx8qv-0"})(["position:fixed;top:","px;left:","px;height:","px;width:","px;display:flex;align-items:center;justify-content:center;z-index:",";overflow:hidden;"],function(e){return e.boundingClientRect.top},function(e){return e.boundingClientRect.left},function(e){return e.boundingClientRect.height},function(e){return e.boundingClientRect.width},ye.j.level5),xn=c.c.div.withConfig({displayName:"DropArea__TextWrapper",componentId:"sc-1htx8qv-1"})(["position:relative;",";display:flex;flex-direction:column;align-items:center;pointer-events:none;"],En),Sn=Object(c.d)(["from{transform:translateX(-50%) translateY(-50%) scale(0);opacity:1;}to{transform:translateX(-50%) translateY(-50%) scale(1);opacity:0.8;}"]),Pn=Object(c.b)(["animation:"," 0.8s cubic-bezier(0.165,0.84,0.44,1) forwards 0.02s;"],Sn),In=c.c.div.withConfig({displayName:"DropArea__Circle",componentId:"sc-1htx8qv-2"})(["position:absolute;pointer-events:none;top:","px;left:","px;width:","px;height:","px;&::before{content:'';width:100%;height:100%;transform-origin:50% 50%;position:absolute;border-radius:50%;background:",";"," opacity:0;}"],function(e){return e.posY},function(e){return e.posX},function(e){return e.size},function(e){return e.size},function(e){return e.color},Pn),An=function(e){function t(){var e;return je()(this,t),(e=Ie()(this,Re()(t).call(this))).state={dragging:!1,showCircle:!1,circlePos:{x:0,y:0}},e.handleGlobalDragEnter=e.handleGlobalDragEnter.bind(De()(e)),e.handleDrop=e.handleDrop.bind(De()(e)),e.handleDragLeave=e.handleDragLeave.bind(De()(e)),e.handleDragOver=e.handleDragOver.bind(De()(e)),e}return Te()(t,e),Se()(t,[{key:"handleGlobalDragEnter",value:function(e){var t=this;this.props.active&&(e.preventDefault(),this.setState({dragging:!0}),clearTimeout(this.danglingDragRemoveTimeout),this.danglingDragRemoveTimeout=setTimeout(function(){return t.clearState()},3e3))}},{key:"componentDidMount",value:function(){document.addEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"clearState",value:function(){this.setState({dragging:!1,showCircle:!1,circlePos:{x:0,y:0}})}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.clearState(),this.props.active&&this.props.onDrop(e)}},{key:"handleDragLeave",value:function(e){e.preventDefault(),this.clearState()}},{key:"handleDragOver",value:function(e){clearTimeout(this.danglingDragRemoveTimeout),e.preventDefault(),e.stopPropagation(),!1===this.state.showCircle&&this.setState({showCircle:!0,circlePos:{x:e.clientX-this.props.boundingClientRect.left,y:e.clientY-this.props.boundingClientRect.top}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,o=t.textColor,r=t.backgroundColor,i=t.boundingClientRect;return n&&this.state.dragging?a.a.createElement(jn,{onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,boundingClientRect:i},this.state.showCircle&&a.a.createElement(ve.ResponsiveConsumer,null,function(t){var n=t.width,o=t.height;return a.a.createElement(In,{size:2*Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),posX:e.state.circlePos.x,posY:e.state.circlePos.y,color:r})}),a.a.createElement(xn,null,a.a.createElement(wn,{color:o}),a.a.createElement(I.a,{top:2},a.a.createElement(S.a,{size:"sizeN1",fontWeight:"bold",color:o},this.props.dropText)))):null}}]),t}(i.PureComponent);An.defaultProps={onDrop:function(){},textColor:"#FFFFFF",backgroundColor:"#000000",dropText:""};var Rn=An,Fn=function(e){var t=e.color;return a.a.createElement("svg",{style:{display:"block"},width:"92px",height:"68px",viewBox:"0 0 92 68"},a.a.createElement("path",{d:"M46 .64a27.9 27.9 0 0 1 19.78 8.19 27.78 27.78 0 0 1 8.03 20A19.95 19.95 0 0 1 92 48.63c0 11.04-8.97 20-20 20H23c-12.67 0-23-10.33-23-23a22.94 22.94 0 0 1 18.63-22.46 27.79 27.79 0 0 1 7.56-14.34A27.97 27.97 0 0 1 46 .63zm0 6c-5.64 0-11.26 2.1-15.56 6.4-3.66 3.66-5.96 10.59-6.51 15.34 0 .06.2.06-2.5.32A17.02 17.02 0 0 0 6 45.64c0 9.42 7.58 17 17 17h49c7.8 0 14-6.2 14-14 0-7.81-6.2-14-14-14H67.12v-3.36c0-10.7-1.43-14.1-5.59-18.24-4.32-4.3-9.9-6.4-15.53-6.4z",fill:t,fillRule:"nonzero"}))},Dn=function(e){var t=e.color;return a.a.createElement("svg",{width:"26px",height:"60px",viewBox:"0 0 26 31"},a.a.createElement("path",{d:"M13 .53l-2.03 1.89-11 10 4.06 4.44L10 11.42v19.22h6V11.42l5.97 5.44c.03.02 4.06-4.44 4.06-4.44l-11-10c-.4-.36-1.07-1-2.03-1.9z",fill:t,fillRule:"nonzero"}))},Nn=Object(c.d)(["from{transform:translateY(0%);}to{transform:translateY(-60px);}"]),Tn=Object(c.b)(["animation:"," 1.2s cubic-bezier(0.68,0.27,0.36,0.77) infinite;"],Nn),Bn=c.c.div.withConfig({displayName:"cloud-upload-icon__Root",componentId:"tj7qoc-0"})(["position:relative;"]),Ln=c.c.div.withConfig({displayName:"cloud-upload-icon__ArrowWrapper",componentId:"tj7qoc-1"})(["",";display:flex;flex-direction:column;"],function(e){return e.animated&&Tn}),Mn=c.c.div.withConfig({displayName:"cloud-upload-icon__ArrowClipper",componentId:"tj7qoc-2"})(["top:0;left:0;position:absolute;overflow:hidden;border-radius:10px 10px 0 0;left:32px;top:2px;bottom:2px;"]),_n=function(e){var t=e.color,n=e.dimmed,o=e.animated;return n&&(t=Object(r.t)(t)),a.a.createElement(Bn,null,a.a.createElement(Fn,{color:t}),a.a.createElement(Mn,null,a.a.createElement(Ln,{animated:o},a.a.createElement(Dn,{color:t}),a.a.createElement(Dn,{color:t}))))},zn=n(693),Vn=n(66),Hn=function(e){var t=e.color;return a.a.createElement("svg",{width:"57px",heifht:"69px",viewBox:"0 0 57 69"},a.a.createElement("path",{d:"M36.7 0H0v69h57V20L36.7 0zM38 7.9L49 18.5H38V7.8zM4.7 64.4V4.6h28.8v18.6h18.9v41.2H4.7z",fill:t,fillRule:"nonzero"}))},Wn=Object(c.d)(["from{transform:scale(0.7);opacity:0.01;}to{transform:scale(1);opacity:1;}"]),Kn=Object(c.b)(["animation:"," 0.2s ease forwards;"],Wn),qn=Object(c.d)(["from{transform:scale(1);opacity:1;}to{transform:scale(0.7);opacity:0.01;}"]),Yn=Object(c.b)(["animation:"," 0.2s ease forwards;"],qn),Un=c.c.div.withConfig({displayName:"uploaded-file-preview__UnknownFileExtensionPlaceholderWrapper",componentId:"mx06qv-0"})(["height:200px;width:",";display:flex;align-items:center;justify-content:center;background:",";"],function(e){return e.fullWidth?"100%":"200px"},function(e){return Object(r.t)(e.color)}),Gn=c.c.div.withConfig({displayName:"uploaded-file-preview__FilePreviewWrapper",componentId:"mx06qv-1"})(["width:",";margin:",";display:flex;align-items:center;flex-direction:column;max-width:100%;transition:all 0.2s ease;",";"],function(e){return e.fullWidth?"100%":"auto"},function(e){return e.fullWidth?"none":"0 20px"},function(e){return e.visible?Kn:Yn}),Qn=c.c.div.withConfig({displayName:"uploaded-file-preview__FilePreview",componentId:"mx06qv-2"})(["border:1px solid ",";border-bottom:none;border-radius:3px 3px 0 0;width:100%;"],function(e){return e.color}),Xn=c.c.div.withConfig({displayName:"uploaded-file-preview__FileFooter",componentId:"mx06qv-3"})(["border:1px solid ",";border-radius:0 0 3px 3px;width:100%;padding:6px 12px;"],function(e){return e.color}),Zn=c.c.img.withConfig({displayName:"uploaded-file-preview__ImagePreview",componentId:"mx06qv-4"})(["height:",";width:",";display:block;max-width:100%;object-fit:cover;"],function(e){return e.fullWidth?"auto":"200px"},function(e){return e.fullWidth?"100%":"auto"}),Jn=c.c.div.withConfig({displayName:"uploaded-file-preview__FileNameDeleteWrapper",componentId:"mx06qv-5"})(["display:flex;justify-content:space-between;"]),$n=c.c.div.withConfig({displayName:"uploaded-file-preview__DeleteFileWrapper",componentId:"mx06qv-6"})(["cursor:pointer;display:flex;align-items:center;justify-content:center;"]),eo=c.c.div.withConfig({displayName:"uploaded-file-preview__FileNameWrapper",componentId:"mx06qv-7"})(["width:1px;min-width:1px;flex:1;display:flex;align-items:center;"]),to=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).state={visible:!0},n.handleCancel=n.handleCancel.bind(De()(n)),n}return Te()(t,e),Se()(t,[{key:"handleCancel",value:function(){this.setState({visible:!1}),setTimeout(this.props.onCancel,200)}},{key:"render",value:function(){var e=function(e){var t=e.split("."),n=t.pop();return[t.join("."),n]}(this.props.originalFileName),t=d()(e,2),n=t[0],o=t[1];return a.a.createElement(Gn,{visible:this.state.visible,fullWidth:"sm"===this.props.breakpoint},a.a.createElement(Qn,{color:this.props.theme.colors.secondary},null!=this.props.fileBlob?a.a.createElement(Zn,{fullWidth:"sm"===this.props.breakpoint,src:this.props.fileBlob,alt:"Uploaded image"}):a.a.createElement(Un,{fullWidth:"sm"===this.props.breakpoint,color:this.props.theme.colors.secondary},a.a.createElement(Hn,{color:this.props.theme.colors.secondary}))),a.a.createElement(Xn,{color:this.props.theme.colors.secondary},a.a.createElement(Jn,null,a.a.createElement(eo,null,a.a.createElement(S.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary,ellipsis:!0},n,"."),a.a.createElement(S.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary},o)),a.a.createElement(I.a,{left:1}),a.a.createElement($n,{onClick:this.handleCancel},a.a.createElement(Vn.b,{svg:zn.a,color:this.props.theme.colors.primary})))))}}]),t}(i.PureComponent);function no(e){return new Promise(function(t,n){var o=new window.FileReader;o.onload=function(e){return t(e.target.result)},o.onerror=n,o.readAsDataURL(e)})}var oo=["image/png","image/gif","image/jpeg","image/svg+xml"],ro=function(e){return oo.some(function(t){return e===t})},io="UPLOADING",ao="PREVIEW",co="INPUT",lo=c.c.input.withConfig({displayName:"FileUpload__FileInput",componentId:"sc-18jtzv9-0"})(["position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);"]),so=c.c.label.withConfig({displayName:"FileUpload__InputLabel",componentId:"sc-18jtzv9-1"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;cursor:pointer;"]),uo=c.c.div.withConfig({displayName:"FileUpload__Wrapper",componentId:"sc-18jtzv9-2"})(["border:",";background:",";height:",";border-radius:3px;display:flex;align-items:center;justify-content:center;position:relative;transition:background 0.1s ease;"],function(e){return e.visible?"1px dashed ".concat(e.color):"none"},function(e){return e.hovered?Object(r.t)(e.color):Object(r.u)(e.color)},function(e){return e.visible?"300px":"auto"}),po=function(e){var t=e.t,n=e.uploadProgress,o=e.theme;return a.a.createElement(D.a,{vertical:!0,align:"center"},a.a.createElement(_n,{color:o.colors.secondary,animated:!0}),a.a.createElement(I.a,{top:2}),a.a.createElement(mn.a,{value:n,color:o.colors.secondary}),a.a.createElement(I.a,{top:1}),a.a.createElement(S.a,{size:"sizeN1",align:"center",color:o.colors.primary},t("block.fileUpload.uploading")))},ho=function(e){var t=e.t,n=e.inputId,o=e.theme,i=e.handleChange;return a.a.createElement(so,{htmlFor:n},a.a.createElement(D.a,{vertical:!0,align:"center"},a.a.createElement(_n,{color:o.colors.secondary,dimmed:!0}),a.a.createElement(I.a,{top:2}),a.a.createElement("div",null,a.a.createElement(S.a,{size:"sizeN1",fontWeight:"bold",color:o.colors.secondary,inline:!0},Object(T.a)(t("block.fileUpload.choose"))," "),!Object(r.j)()&&a.a.createElement(S.a,{size:"sizeN1",color:o.colors.primary,inline:!0},Object(T.a)(t("block.fileUpload.drag")))),a.a.createElement(I.a,{top:1}),a.a.createElement(S.a,{size:"sizeN2",align:"center",color:o.colors.primary},t("block.fileUpload.hintSize"))),a.a.createElement(lo,{type:"file",id:n,onChange:i}))},mo=function(e){var t=e.t,n=e.phase,o=e.uploadProgress,r=e.theme,i=e.handleChange,c=e.blockRef,l=e.originalFileName,s=e.fileBlob,u=e.handleCancel,p=e.breakpoint;return n===io?a.a.createElement(po,{t:t,uploadProgress:o,theme:r}):n===co?a.a.createElement(ho,{t:t,theme:r,handleChange:i,inputId:"stkv-text-".concat(c)}):n===ao?a.a.createElement(to,{theme:r,originalFileName:l,fileBlob:s,onCancel:u,breakpoint:p}):void 0},fo=function(e){var t=e.t,n=e.breakpoint,o=e.theme,r=e.layoutItemsSize,c=e.isFocused,l=e.onRequireStickyFooter,s=e.isActive,u=e.onCommitAnswer,p=e.blockRef,h=e.isCommitButtonVisible,m=e.onStageAnswer,f=e.value,b=Object(i.useState)(),v=d()(b,2),g=v[0],y=v[1],k=Object(i.useState)(!1),C=d()(k,2),w=C[0],E=C[1],j=Object(i.useState)(0),x=d()(j,2),S=x[0],P=x[1],A=f&&f.length>0?f[0]:void 0,R=w?io:A?ao:co,F=function(){m(p,null)},D=function(e){var t=e.target.files;t.length&&M(t[0])},N=function(e){P(e)},B=function(e){m(p,{value:e,label:e.name}),E(!1)},L=function(e){E(!1);var t=e&&e.message;y("file-size-exceeded"===t?"label.error.sizeLimit":"label.error.upload")},M=function(){var e=dn()(un.a.mark(function e(t){return un.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),L(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),_=function(){var t=dn()(un.a.mark(function t(n){var o,r,i,a,c;return un.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),P(0),y(null),o=e.formId,r=e.id,t.next=6,Object(Cn.c)(o,r);case 6:if(i=t.sent,!(n.size>i.maxSize)){t.next=9;break}throw new Error("file-size-exceeded");case 9:return t.next=11,Object(Cn.f)(n,i,N);case 11:if(a=t.sent,!ro(n.type)){t.next=18;break}return t.next=15,no(n);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=null;case 19:c=t.t0,B({name:n.name,type:n.type,s3Filename:a,blob:c});case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement(At,O()({},e,{customError:g}),a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement(kn,{shouldFocus:c,layoutItemsSize:r,"data-qa":"focusable"},a.a.createElement(bn.a,null,function(e){var r=e.hovered;return a.a.createElement(uo,{visible:"sm"!==n||R!==ao,color:o.colors.secondary,hovered:r&&R===co},a.a.createElement(mo,{t:t,phase:R,uploadProgress:S,theme:o,handleChange:D,blockRef:p,originalFileName:A&&A.name,fileBlob:A&&A.blob,handleCancel:F,breakpoint:n}))}),a.a.createElement(Rn,{textColor:o.colors.background,backgroundColor:o.colors.secondary,boundingClientRect:r.boundingClientRect,active:s&&R===co,onDrop:function(e){var t=e.dataTransfer.files;M(t[0])},dropText:Object(T.a)(t("block.fileUpload.dropFiles"))}))),a.a.createElement(me,{buttonColor:o.colors.button,helperColor:o.colors.primary,backgroundColor:o.colors.background,onRequireStickyFooter:l,blockRef:p,isVisible:h,onClick:function(e){e.stopPropagation(),s&&u(p)},layoutItemsSize:r}))};fo.defaultProps={breakpoint:"md",file:{},onCommitAnswer:G.a,onRequireStickyFooter:G.a,onStageAnswer:G.a,t:function(e){return e},theme:{colors:{primary:"#FF00FF",secondary:"#FF00FF"}}};var bo=Object(ve.withBreakpoint)(fo),vo=n(61),go=n.n(vo),yo=n(643),ko=n(690),Co=n(642),wo=function(e){var t=e.color,n=e.maxSelection,o=e.minSelection,r=e.selectionCount,i=e.t;return a.a.createElement(I.a,{bottom:2},a.a.createElement(S.a,{color:t,fontWeight:"regular",htmlTag:"p",size:"size0"},Object(T.a)(i(function(e){var t=e.t,n=e.minSelection,o=e.maxSelection,r=e.selectionCount;return n||o?!n&&o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectUpToX",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:t-n})}(t,o,r):n&&!o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectAtLeastX",{x:t}):t<=n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-n})}(t,n,r):n===o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectXchoices",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectXMore",{x:t-n})}(t,n,r):n!==o?function(e,t,n,o){return 0===o?e("block.multipleChoice.selectionLimit.hint.selectXYchoices",{x:t,y:n}):o<t?e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-o}):o>=t&&o<n?e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:n-o}):o===n?e("block.multipleChoice.selectionLimit.hint.noMore"):void 0}(t,n,o,r):void 0:function(e){return e("block.multipleChoice.hint")}(t)}({t:i,minSelection:o,maxSelection:n,selectionCount:r})))))};wo.defaultProps={t:function(e){return e}};var Oo=Object(N.a)(wo);function Eo(e){return Rt.a.A<=e&&e<=Rt.a.Z}var jo="ABCDEFGHIJKLMNOPQRSTUVWXYZ",xo=function(e){var t=Math.floor(e%jo.length);return jo[t]};var So=function e(t){return t>=jo.length?e(Math.floor(t/jo.length)-1)+xo(t):xo(t)};function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var Io=c.c.div.withConfig({displayName:"MultipleChoice__Hidden",componentId:"jizsn7-0"})(["opacity:0;pointer-events:none;position:absolute;height:1px;overflow-y:scroll;"]),Ao=-1,Ro=g()(JSON.stringify,function(e){var t=e.choices,n=e.t;return t.map(function(e){return{label:n(e.label),ref:e.ref}})}),Fo=function(e){function t(){return je()(this,t),Ie()(this,Re()(t).apply(this,arguments))}return Te()(t,e),Se()(t,[{key:"render",value:function(){var e=this.props,t=e.choices,n=e.allowOtherChoice,o=e.otherValue,r=e.vertical;return a.a.createElement(i.Fragment,null,t.map(function(e){return a.a.createElement(yo.b,{title:e.label,key:e.ref,keyHelperLetter:"MM"})}),n&&r&&a.a.createElement(yo.b,{title:o,keyHelperLetter:"MM"}))}}]),t}(i.PureComponent),Do=function(e){function t(e){var n;return je()(this,t),n=Ie()(this,Re()(t).call(this,e)),b()(De()(n),"getBlockNode",function(e){return n.blockNode=e}),b()(De()(n),"getHiddenListRef",function(e){return n.hiddenListRef=e}),n.state={keyboardHoveredIndex:Ao,editingOtherChoice:!1,longestChoiceWidth:null,otherValue:n.getOtherValue()},n.renderedColumns=1,n.firstCharacterShortcuts=[],n.handleSelect=n.handleSelect.bind(De()(n)),n.handleCommitAnswer=n.handleCommitAnswer.bind(De()(n)),n.handleKeyDown=n.handleKeyDown.bind(De()(n)),n.handleOtherChoiceClick=n.handleOtherChoiceClick.bind(De()(n)),n.handleOtherChoiceCommit=n.handleOtherChoiceCommit.bind(De()(n)),n.handleOtherChoiceChange=n.handleOtherChoiceChange.bind(De()(n)),n.handleOtherChoiceBlur=n.handleOtherChoiceBlur.bind(De()(n)),n.handleOtherChoiceKeyDown=n.handleOtherChoiceKeyDown.bind(De()(n)),n.handleColumnsChanged=n.handleColumnsChanged.bind(De()(n)),n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){this.updateLongestChoiceWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.keyboardHoveredIndex>=0;this.props.isActive&&e.isActive||t&&this.setState({keyboardHoveredIndex:Ao})}},{key:"shouldComponentUpdate",value:function(e,t){return zt(this.props,e)||this.state.longestChoiceWidth!==t.longestChoiceWidth||e.choices!==this.props.choices}},{key:"componentDidUpdate",value:function(e){if(this.props.isActive){e.choices.length!==this.props.choices.length&&this.props.recenter(),this.updateLongestChoiceWidth()}else{var t=e.theme,n=this.props.theme;!t.isFontLoaded&&n.isFontLoaded&&this.updateLongestChoiceWidth()}}},{key:"getChoicesLength",value:function(){var e=this.props,t=e.choices;return e.allowOtherChoice?t.length+1:t.length}},{key:"getOtherValue",value:function(){var e=this.props,t=e.choices,n=e.value;return n&&n.find(function(e){return!function(e){return t.map(function(e){return e.ref}).includes(e)}(e)})}},{key:"getOtherChoiceRef",value:function(){return"".concat(this.props.blockRef,"-other")}},{key:"getPositionRef",value:function(e){if(this.props.allowOtherChoice&&e===this.getChoicesLength()-1)return this.getOtherChoiceRef();var t=this.props.choices[e];return t?t.ref:void 0}},{key:"updateLongestChoiceWidth",value:function(){if(this.hiddenListRef){var e=this.props.longestChoiceWidth||this.hiddenListRef.clientWidth;e!==this.state.longestChoiceWidth&&this.setState({longestChoiceWidth:e})}}},{key:"createKeyShortcut",value:function(e,t,n){var o=this.props.keyboardShortcutType;if("letter"===o)return So(e);if("firstCharacter"===o){var r=t.charAt(0).toUpperCase();return this.firstCharacterShortcuts.push(r),r}return"custom"===o?this.props.t(n):void 0}},{key:"handleOtherChoiceChange",value:function(e){(e.preventDefault(),e.stopPropagation(),Object(r.j)()&&!Object(_t.a)())&&(0,this.props.recenter)(Mt,Mt);this.setState({otherValue:e.target.value})}},{key:"handleLetterKeyboardShortcut",value:function(e){var t=e-Rt.a.A;this.handleKeyboardSelect(t)}},{key:"handleFirstCharacterShortcut",value:function(e){var t=this.firstCharacterShortcuts.findIndex(function(t){return String.fromCharCode(e)===t});this.handleKeyboardSelect(t)}},{key:"handleCustomCharacterShortcut",value:function(e){var t=this.props,n=t.choices,o=t.t,r=n.find(function(t){var n=t.keyboardShortcut;return o(n)===String.fromCharCode(e)});r&&this.handleSelect(r.ref)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.props.keyboardShortcutType,o={};if("letter"===n&&Eo(t))return this.handleLetterKeyboardShortcut(t),e.preventDefault(),void e.stopPropagation();if("firstCharacter"===n&&Eo(t))return this.handleFirstCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();if("custom"===n&&Eo(t))return this.handleCustomCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();(o[Rt.a.SPACE]=this.handleSelectHovered,o[Rt.a.ENTER]=this.handleSelectHovered,this.props.verticalAlignment?(o[Rt.a.ARDOWN]=this.hoverNextStep,o[Rt.a.ARUP]=this.hoverPreviousStep):(o[Rt.a.ARRIGHT]=this.hoverNextStep,o[Rt.a.ARLEFT]=this.hoverPreviousStep,o[Rt.a.ARDOWN]=this.hoverNextRow,o[Rt.a.ARUP]=this.hoverPreviousRow),o[t])&&(o[t].call(this,e)||(e.preventDefault(),e.stopPropagation()))}},{key:"handleOtherChoiceClick",value:function(){this.unstageOtherChoice(),this.props.onInputFocus(),this.setState({editingOtherChoice:!0})}},{key:"handleOtherChoiceBlur",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.setState({editingOtherChoice:!1})},300)}},{key:"handleOtherChoiceCommit",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.stageOtherChoice(e.state.otherValue),e.setState({editingOtherChoice:!1})},300)}},{key:"removeStagedOtherChoice",value:function(e){var t=this;return e.filter(function(e){return e!==t.getOtherValue()})}},{key:"unstageOtherChoice",value:function(){var e=this.props,t=e.onStageAnswer,n=e.value,o=e.allowMultipleSelection,r=e.blockRef,i=n||[];t(r,o?this.removeStagedOtherChoice(i):[])}},{key:"stageOtherChoice",value:function(e){var t=this,n=this.props,o=n.onStageAnswer,r=n.value,i=n.allowMultipleSelection,a=n.blockRef,c=r||[],l=(i?[].concat(go()(this.removeStagedOtherChoice(c)),[e]):[e]).filter(Boolean);o(a,l),l.length&&!i&&setTimeout(function(){t.handleCommitAnswer()},Ht)}},{key:"hoverNextRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex>=0?this.state.keyboardHoveredIndex+this.renderedColumns:0)}},{key:"hoverPreviousRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-this.renderedColumns)}},{key:"hoverNextStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex+1)}},{key:"hoverPreviousStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-1)}},{key:"changekeyboardHoveredIndex",value:function(e){return e>=this.getChoicesLength()||(e<0||(this.setState({keyboardHoveredIndex:e}),this.props.scrollToChoice(this.getPositionRef(e)),!1))}},{key:"handleSelectHovered",value:function(){this.handleKeyboardSelect(this.state.keyboardHoveredIndex)}},{key:"handleKeyboardSelect",value:function(e){if(e===Ao)this.handleCommitAnswer();else{var t=this.getPositionRef(e);if(t!==this.getOtherChoiceRef())t&&this.handleSelect(t);else((this.props.value||[]).includes(this.getOtherValue())||this.canSelectMoreChoices())&&this.handleOtherChoiceClick()}}},{key:"handleSelect",value:function(e){var t,n=this,o=this.props,r=o.onStageAnswer,i=o.allowMultipleSelection,a=o.value||[],c=a.includes(e);(c||this.canSelectMoreChoices())&&(t=i?c?a.filter(function(t){return t!==e}):[].concat(go()(a),[e]):c?[]:[e],r(this.props.blockRef,t),i||c||setTimeout(function(){n.handleCommitAnswer()},Ht))}},{key:"handleColumnsChanged",value:function(e){this.renderedColumns=e}},{key:"handleOtherChoiceKeyDown",value:function(e){e.stopPropagation(),e.keyCode===Rt.a.ENTER&&this.handleOtherChoiceCommit(),e.keyCode===Rt.a.ESCAPE&&this.handleOtherChoiceBlur()}},{key:"handleCommitAnswer",value:function(){this.props.onCommitAnswer(this.props.blockRef)}},{key:"canSelectMoreChoices",value:function(){var e=this.props,t=e.value,n=e.validations.maxSelection;return!n||(t||[]).length<n}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowMultipleSelection,o=t.allowOtherChoice,r=t.choices,i=t.isActive,c=t.isCommitButtonVisible,l=t.isFocused,s=t.onRequireStickyFooter,u=t.showLabels,p=t.supersized,d=t.t,h=t.theme,m=t.title,f=t.validations,v=t.value,g=t.verticalAlignment,y=t.withImage,k=f.minSelection,C=f.maxSelection,w=this.state.otherValue,O=this.getChoicesLength(),E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{title:{text:m,type:"legend"},useFieldset:!0}),j=v||[],x=i?this.state.keyboardHoveredIndex:null,S=!this.canSelectMoreChoices(),P=!g&&!this.props.longestChoiceWidth,A=this.props.longestChoiceWidth||this.state.longestChoiceWidth,R=y?Co.a:ko.a;return a.a.createElement(At,E,r&&a.a.createElement("div",{ref:this.getBlockNode},a.a.createElement(I.a,{top:4,bottom:2},n&&a.a.createElement(Oo,{color:h.colors.secondary,maxSelection:C,minSelection:k,selectionCount:j.length}),P&&a.a.createElement(Io,{ref:this.getHiddenListRef},a.a.createElement(Fo,{choices:Ro({choices:r,t:d}),allowOtherChoice:o,otherValue:w,vertical:g})),a.a.createElement(kn,{shouldFocus:l&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize,onKeyDown:this.handleKeyDown,"data-qa":"focusable"},a.a.createElement(yo.a,{onChangeColumns:this.handleColumnsChanged,vertical:g,longestChoiceWidth:A,ignoreBreakpoints:y},r.map(function(t,n){return a.a.createElement(yo.b,{dataQa:"choice",dataQaIndex:n,title:u?Object(T.a)(d(t.label)):"",key:t.ref,choiceRef:t.ref,hovered:x===n,selected:j.includes(t.ref),disabled:S&&!j.includes(t.ref),onClick:e.handleSelect,color:h.colors.secondary,contextBackgroundColor:h.colors.background,keyHelperHint:d("label.hint.key"),keyHelperLetter:e.createKeyShortcut(n,t.label,t.keyboardShortcut),withImage:y,superSizedImage:p,isCropped:t.isCropped,imageSrc:t.attachment&&t.attachment.resource&&t.attachment.resource.default})}),o&&a.a.createElement(R,{dataQa:"other-choice",placeholder:d("block.multipleChoice.other"),value:w,editing:this.state.editingOtherChoice,choiceRef:this.getOtherChoiceRef(),hovered:x===O-1,disabled:S&&!this.getOtherValue(),selected:!!this.getOtherValue(),onClick:this.handleOtherChoiceClick,onChange:this.handleOtherChoiceChange,onBlur:this.handleOtherChoiceBlur,onEditConfirm:this.handleOtherChoiceCommit,onKeyDown:this.handleOtherChoiceKeyDown,color:h.colors.secondary,superSizedImage:p,contextBackgroundColor:h.colors.background,keyHelperHint:d("label.hint.key"),keyHelperLetter:this.createKeyShortcut(O-1,w)})))),n&&a.a.createElement(me,{buttonColor:h.colors.button,helperColor:h.colors.primary,backgroundColor:h.colors.background,onRequireStickyFooter:s,blockRef:this.props.blockRef,onClick:this.handleCommitAnswer,isVisible:c&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize})))}}]),t}(i.Component);Do.defaultProps={keyboardShortcutType:"letter",onCommitAnswer:G.a,onInputBlur:G.a,onInputFocus:G.a,onStageAnswer:G.a,recenter:G.a,scrollToChoice:G.a,showLabels:!0,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}},validations:{},verticalAlignment:!0,withImage:!1};var No=Do;function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Lo={sm:110,md:140,lg:150},Mo=g()(JSON.stringify,function(e){var t=e.choices,n=e.croppedChoiceRefs;return t.map(function(e){return Bo({},e,{isCropped:!!n[e.ref]})})}),_o=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).state={croppedChoiceRefs:{}},n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"componentDidUpdate",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"updateCroppedChoiceRefs",value:function(){var e=dn()(un.a.mark(function e(t,n,o){var r,i,a,c,l,s;return un.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r={},!this.updatingCroopedChoicesRefs){e.next=5;break}return e.abrupt("return");case 5:this.updatingCroopedChoicesRefs=!0,e.t0=un.a.keys(n);case 7:if((e.t1=e.t0()).done){e.next=24;break}if(i=e.t1.value,a=n[i],c=a.attachment&&a.attachment.resource,!(l=c&&c.src)||null!=o[a.ref]){e.next=22;break}return e.prev=13,e.next=16,Object(Cn.b)(l);case 16:s=e.sent,r[a.ref]=s,e.next=22;break;case 20:e.prev=20,e.t2=e.catch(13);case 22:e.next=7;break;case 24:Object.keys(r).length&&this.setState({croppedChoiceRefs:Bo({},o,{},r)}),this.updatingCroopedChoicesRefs=!1;case 27:case"end":return e.stop()}},e,this,[[13,20]])}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.breakpoint,n=e.supersized,o=e.choices,r=Lo[t]*(n?1.5:1),i=n?Mo({choices:o,croppedChoiceRefs:this.state.croppedChoiceRefs}):o;return a.a.createElement(No,O()({},this.props,{choices:i,verticalAlignment:!1,longestChoiceWidth:Math.round(r),withImage:!0}))}}]),t}(i.Component);s.a.defaultProps={choices:[]};var zo=Object(ve.withBreakpoint)(_o),Vo=n(630),Ho=n(626),Wo=n(688),Ko=n.n(Wo),qo=n(625),Yo=c.c.div.withConfig({displayName:"NativeDropdown__SelectWrapper",componentId:"k3avl5-0"})(["position:relative;"]),Uo=c.c.select.withConfig({displayName:"NativeDropdown__Select",componentId:"k3avl5-1"})(["appearance:none;display:block;width:100%;font-family:inherit;color:",";padding-left:0px;padding-right:26px;padding-bottom:8px;border-radius:0;border:none;transition:0.2s;background-color:transparent;",";box-shadow:0 1px ",";&:-moz-focusring{color:transparent;text-shadow:0 0 0 transparent;}outline:none;&:focus{outline:none;}"],function(e){return e.color},function(e){return ye.f[e.size]},function(e){return Object(r.t)(e.color)}),Go=Object(c.c)(Vn.b).attrs({svg:qo.a}).withConfig({displayName:"NativeDropdown__DropdownIcon",componentId:"k3avl5-2"})(["position:absolute;right:5px;top:14px;user-select:none;"]),Qo=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).handleChange=n.handleChange.bind(De()(n)),n}return Te()(t,e),Se()(t,[{key:"handleChange",value:function(e){var t=this;this.props.onStageAnswer(this.props.blockRef,[e.target.value]),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},Ht)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.choices,o=e.color,i=e.placeholder,c=e.breakpoint,l=n.map(function(e){return e.label}),s=""!==t,u=Object(r.t)(o);return a.a.createElement(Yo,null,a.a.createElement(Uo,{size:Object(x.breakpointToTextSize)("size3",c),color:s?o:u,value:t,onChange:this.handleChange},a.a.createElement("option",{value:""},i),l.map(function(e,t){return a.a.createElement("option",{key:t,value:e},e)})),a.a.createElement(Go,{color:o}))}}]),t}(i.Component);Qo.defaultProps={color:r.b,blockRef:""};var Xo=Qo,Zo=n(60),Jo=-1,$o=c.c.div.withConfig({displayName:"Dropdown__Focusable",componentId:"sc-1auld0s-0"})(["outline:none;"]),er=function(e){function t(e){var n;je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).handleMouseEnter=n.handleMouseEnter.bind(De()(n)),n.handleMouseLeave=n.handleMouseLeave.bind(De()(n)),n.handleAnswer=n.handleAnswer.bind(De()(n)),n.handleInputChange=n.handleInputChange.bind(De()(n)),n.handleInputBlur=n.handleInputBlur.bind(De()(n)),n.handleInputClick=n.handleInputClick.bind(De()(n)),n.handleKeyDown=n.handleKeyDown.bind(De()(n)),n.handleIconClick=n.handleIconClick.bind(De()(n)),n.handleWaypointEnter=n.handleWaypointEnter.bind(De()(n)),n.handleWaypointLeave=n.handleWaypointLeave.bind(De()(n)),n.inputId="".concat(n.props.type,"-").concat(n.props.blockRef),n.memoizedFilterOptions=g()(function(e,t){return t},Ho.a);var o=n.props.value;return n.state={forceHoverIndex:Jo,forceSelectedIndex:Jo,forceFocusInput:!1,insideViewport:!1,showList:!1,hovered:!1,filter:o&&o.length>0?o[0]:""},n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){this.props.isActive&&this.checkForceFocusInput(this.props.isFocused,this.state.insideViewport)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isActive,n=e.shouldClearInput,o=e.isFocused;t&&o&&!this.props.isFocused&&this.checkForceFocusInput(o,this.state.insideViewport),!t&&this.state.showList&&this.toggleDropdown(!1),n&&this.setState({filter:""})}},{key:"shouldComponentUpdate",value:function(e){return zt(this.props,e)}},{key:"componentDidUpdate",value:function(){this.state.forceFocusInput&&this.setState({forceFocusInput:!1})}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length>0?e[0]:void 0}},{key:"getFilteredOptions",value:function(){return this.memoizedFilterOptions(this.props.choices,this.state.filter)}},{key:"getListHeight",value:function(){if(!Object(Zo.a)())return 0;var e=(this.props.layoutItemsSize.boundingClientRect.height||0)/2-8-0;return Math.max(0,e)}},{key:"handleWaypointEnter",value:function(){var e=this;this.setState({insideViewport:!0}),setTimeout(function(){return e.checkForceFocusInput(e.props.isFocused,e.state.insideViewport)},100)}},{key:"handleWaypointLeave",value:function(){this.setState({insideViewport:!1})}},{key:"handleMouseEnter",value:function(){this.setState({hovered:!0})}},{key:"handleMouseLeave",value:function(){this.setState({hovered:!1})}},{key:"stage",value:function(e){this.props.onStageAnswer(this.props.blockRef,[e])}},{key:"unstage",value:function(){this.setState({forceSelectedIndex:Jo}),this.props.onStageAnswer(this.props.blockRef,null)}},{key:"handleAnswer",value:function(e){var t=this,n=this.props.choices[e];this.setState({forceSelectedIndex:e,forceHoverIndex:Jo}),n&&setTimeout(function(){t.toggleDropdown(!1),t.stage(n.label),t.setState({filter:n.label}),t.props.onCommitAnswer(t.props.blockRef)},Ht)}},{key:"handleInputChange",value:function(e){this.unstage();var t=this.memoizedFilterOptions(this.props.choices,e||""),n=null!=e&&t.length>0;this.toggleDropdown(n),this.setState({filter:e||""}),Object(r.j)()&&this.props.recenter(Mt)}},{key:"handleInputBlur",value:function(){this.state.hovered||this.toggleDropdown(!1)}},{key:"handleInputClick",value:function(){this.toggleDropdown(!0)}},{key:"toggleDropdown",value:function(e){var t=this;e!==this.state.showList&&(e&&setTimeout(function(){return t.props.recenter(Mt)},200),this.setState({showList:e,forceHoverIndex:e?0:Jo}))}},{key:"handleIconClick",value:function(){this.toggleDropdown(!this.state.showList)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.getFilteredOptions().length;switch(t){case Rt.a.ARDOWN:e.preventDefault(),e.stopPropagation(),this.toggleDropdown(!0),this.setState({forceHoverIndex:Math.min(n-1,this.state.forceHoverIndex+1)});break;case Rt.a.ARUP:this.state.showList&&(e.preventDefault(),e.stopPropagation(),this.setState({forceHoverIndex:Math.max(0,this.state.forceHoverIndex-1)}));break;case Rt.a.ENTER:if(this.state.showList&&n>0&&this.state.forceHoverIndex!==Jo){e.preventDefault(),e.stopPropagation();var o=function(e,t){var n=t.find(function(t,n){return n===e});return n?n.index:null}(this.state.forceHoverIndex,this.memoizedFilterOptions(this.props.choices,this.state.filter));this.handleAnswer(o)}else this.props.validations&&this.props.validations.required&&(e.preventDefault(),e.stopPropagation(),this.unstage(),this.props.onCommitAnswer(this.props.blockRef),this.setState({showList:!1,filter:""}))}}},{key:"checkForceFocusInput",value:function(e,t){var n=this;e&&t&&(Object(r.j)()||setTimeout(function(){n.setState({forceFocusInput:!0})},500))}},{key:"render",value:function(){var e=this.props,t=e.choices,n=e.title,o=e.placeholder,i=e.theme,c=e.isFocused,l=e.t,s=e.onStageAnswer,u=e.onCommitAnswer,p=e.blockRef,d=e.breakpoint,h=0===this.getFilteredOptions().length,m=!0===this.state.showList;return a.a.createElement(At,O()({},this.props,{title:{text:n,for:this.inputId,type:"label"},hideError:m,customError:h?"block.dropdown.hint":null,noOkButton:!0}),Object(r.j)()?a.a.createElement(I.a,{top:4},a.a.createElement(Xo,{breakpoint:d,blockRef:p,choices:t,color:i.colors.secondary,placeholder:l("block.dropdown.placeholderTouch"),onStageAnswer:s,onCommitAnswer:u,value:this.getAnswerValue()})):a.a.createElement(Vo.a,{onEnter:this.handleWaypointEnter,onLeave:this.handleWaypointLeave},a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement($o,{tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-qa":"focusable"},a.a.createElement(Ko.a,{placeholder:l(o),options:t.map(function(e){return e.label}),color:i.colors.secondary,contextBackgroundColor:i.colors.background,filterValue:this.state.filter,hoveredIndex:this.state.forceHoverIndex,selectedIndex:this.state.forceSelectedIndex,onFilterChange:this.handleInputChange,onInputClick:this.handleInputClick,onArrowClick:this.handleIconClick,onOptionClick:this.handleAnswer,onInputBlur:this.handleInputBlur,optionsMaxHeight:"".concat(this.state.showList?this.getListHeight():0,"px"),optionsOpen:this.state.showList,forceFocus:c&&this.state.forceFocusInput})))))}}]),t}(i.Component);er.defaultProps={onCommitAnswer:G.a,onStageAnswer:G.a,recenter:G.a,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}}};var tr=Object(ve.withBreakpoint)(er),nr=n(687),or=n.n(nr);var rr=function(e){var t=Object(i.useRef)([]),n=Object(i.useRef)(null);function o(){clearTimeout(n.current),n.current=null}return{onKeyDown:function(r){!function(e){return Rt.a.NUM_0<=e&&e<=Rt.a.NUM_9||Rt.a.NUMPAD_0<=e&&e<=Rt.a.NUMPAD_9}(r)?o():(null===n.current&&(t.current=[],n.current=setTimeout(function(){e(function(e){return e.reduce(function(e,t,n){return e+t*Math.pow(10,n)},0)}(t.current))},200)),t.current.unshift(function(e){return e-(e>=Rt.a.NUMPAD_0?Rt.a.NUMPAD_0:Rt.a.NUM_0)}(r)))},clearNumberTimeout:o}};function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var ar=Object(i.memo)(function(e){var t=e.blockRef,n=e.children,o=e.isFocused,r=e.max,c=e.min,l=e.onCommitAnswer,s=e.title,u=e.unstageOnKeyDown,p=e.layoutItemsSize,h=Object(i.useState)(!1),m=d()(h,2),f=m[0],v=m[1],g=Object(i.useState)(-1),y=d()(g,2),k=y[0],C=y[1],w=rr(x),O=w.onKeyDown,E=w.clearNumberTimeout;function j(){e.onStageAnswer(e.blockRef,[]),E()}function x(t){E(),t<e.min||t>e.max||(S()!==t?(e.onStageAnswer(e.blockRef,[t]),setTimeout(function(){e.onCommitAnswer(e.blockRef)},Ht)):j())}function S(){var t=e.value;return t&&t.length>0?t[0]:void 0}Object(i.useEffect)(function(){o||v(!1)},[o]);var P=S(),A=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{title:{text:s,type:"legend"},useFieldset:!0});return a.a.createElement(At,A,a.a.createElement(kn,{shouldFocus:o,layoutItemsSize:p,onKeyDown:function(e){var n=e.keyCode;if(O(n),n===Rt.a.ENTER&&(e.stopPropagation(),f?x(k):l(t)),n===Rt.a.ARRIGHT){var o=S();null==o||f?f?C(Math.min(r,k+1)):(v(!0),C(c)):(v(!0),C(Math.min(r,o+1)),u&&j())}if(n===Rt.a.ARLEFT){var i=S();null==i||f?f&&C(Math.max(c,k-1)):(v(!0),C(Math.max(c,i-1)),u&&j())}}},a.a.createElement(I.a,{top:4,bottom:3},n({hoveredAmount:f?k:-1,isKeyboardHovered:f,onClick:function(e){x(e)},selectedAmount:P}))))},Vt);var cr=function(e){Object(i.useEffect)(function(){var t=e.blockIndex,n=e.blockRef,o=e.onCommitAnswer,r=e.onStageAnswer;if(0===t){var i=function(){if(!window||!window.location)return null;var e=window.location.search.match(/prefilled_answer=[0-9]+/);return e?parseInt(e[0].split("=")[1],10):null}();null!=i&&setTimeout(function(){r(n,[i]),setTimeout(function(){o(n)},Ht)},2e3)}},[]);var t=e.labels,n=e.startAtOne,o=e.steps,r=e.theme,c=C()(e,["labels","startAtOne","steps","theme"]),l=n?1:0,s=l+o-1;return a.a.createElement(ar,O()({max:s,min:l,theme:r},c),function(e){var n=e.hoveredAmount,o=e.isKeyboardHovered,i=e.onClick,c=e.selectedAmount;return a.a.createElement(or.a,{color:r.colors.secondary,hoveredAmount:n,isKeyboardHovered:o,labelLeft:t.left,labelCenter:t.center,labelRight:t.right,max:s,min:l,onClick:i,selectedAmount:c})})};cr.defaultProps={labels:{},onCommitAnswer:function(){},onStageAnswer:function(){},theme:{colors:{secondary:r.b}}};var lr=cr,sr=c.c.div.withConfig({displayName:"Group__ButtonWrapper",componentId:"sc-14mp1zx-0"})(["",";margin-top:","px;width:100%;outline:none;&:focus{outline:none;}"],function(e){return e.isActive?"":"pointer-events: none;"},4*ye.h);sr.displayName="ButtonWrapper";var ur=function(e){var t=e.blockRef,n=e.buttonText,o=e.children,r=e.isActive,c=e.isFocused,l=e.layoutItemsSize,s=e.theme,u=e.onRequireStickyFooter,p=e.t,h=void 0===p?function(e){return e}:p,m=Object(i.useState)(null),f=d()(m,2),b=f[0],v=f[1];Wt(b,c,l);var g=function(n){n.stopPropagation(),r&&e.onCommitAnswer(t)};return a.a.createElement(At,e,a.a.createElement(kn,{shouldFocus:c,layoutItemsSize:l,onKeyDown:function(e){e.nativeEvent.keyCode===Rt.a.ENTER&&g(e)},"data-qa":"focusable"},o,a.a.createElement(sr,{ref:v,isActive:r,tabIndex:"-1"},a.a.createElement(me,{buttonColor:s.colors.button,helperColor:s.colors.primary,backgroundColor:s.colors.background,onRequireStickyFooter:u,blockRef:t,buttonText:h(n),onClick:g,isAnimated:!1,isVisible:r,hideIcon:!0}))))};ur.defaultProps={theme:{colors:{}}};var pr=Object(i.memo)(ur,Vt),dr=function(e){return a.a.createElement(pr,O()({},e,{titleCounterIcon:e.hideMarks?null:"quote"}))},hr=n(685),mr=n.n(hr),fr=function(e){var t=e.shape,n=e.steps,o=e.theme,r=C()(e,["shape","steps","theme"]),i=n;return a.a.createElement(ar,O()({max:i,min:1,theme:o},r,{unstageOnKeyDown:!0}),function(e){var n=e.hoveredAmount,r=e.isKeyboardHovered,c=e.onClick,l=e.selectedAmount;return a.a.createElement(mr.a,{color:o.colors.secondary,hoveredAmount:n,iconName:t,isKeyboardHovered:r,max:i,min:1,onClick:c,selectedAmount:l})})};fr.defaultProps={onCommitAnswer:function(){},onStageAnswer:function(){},shape:"circle",theme:{colors:{secondary:r.b}}};var br=fr,vr=c.c.div.withConfig({displayName:"Unsupported__Root",componentId:"sc-1p6qu18-0"})(["display:flex;margin-top:25px;max-width:750px;padding:15px;border-style:solid;border-width:1px;border-radius:3px;color:",";background-color:",";border-color:",";-webkit-font-smoothing:antialiased;"],function(e){return e.color},function(e){return Object(r.d)(e.color,.05)},function(e){return Object(r.s)(e.color)}),gr=function(e){var t=e.theme,n=e.t,o=e.type,r=C()(e,["theme","t","type"]);return a.a.createElement(At,O()({theme:t},r),a.a.createElement(vr,{color:t.colors.secondary},a.a.createElement("label",null,Object(T.a)(n("block.unsupported.message",{type:n("block.types.".concat(o))})))))};gr.defaultProps={t:function(e){return e},theme:{colors:{secondary:r.b}}};var yr=gr,kr=function(e){var t={true:"".concat(e.blockRef,"-yes"),false:"".concat(e.blockRef,"-no")},n=[{ref:t[!0],value:!0,label:"label.yes.default",keyboardShortcut:"label.yes.shortcut"},{ref:t[!1],value:!1,label:"label.no.default",keyboardShortcut:"label.no.shortcut"}],o=Array.isArray(e.value)?e.value[0]:e.value;return a.a.createElement(No,O()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=d()(o,1)[0],i=n.find(function(e){return e.ref===r}),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"custom",verticalAlignment:!0}))};kr.defaultProps={onCommitAnswer:G.a,onStageAnswer:G.a,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}}};var Cr=kr,wr=function(e){var t={true:"".concat(e.blockRef,"-accept"),false:"".concat(e.blockRef,"-reject")},n=[{ref:t[!0],value:!0,label:"block.legal.accept"},{ref:t[!1],value:!1,label:"block.legal.reject"}],o=Array.isArray(e.value)?e.value[0]:e.value;return a.a.createElement(No,O()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=d()(o,1)[0],i=n.find(function(e){return e.ref===r}),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"letter",verticalAlignment:!0}))};wr.defaultProps={onCommitAnswer:G.a,onStageAnswer:G.a,t:function(e){return e},theme:{colors:{secondary:"#FF00FF",background:"#FFFFFF"}}};var Or=wr;function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var jr=0,xr=function(e){var t=e.blockRef,n=e.inputType,o=e.isActive,c=e.isCommitButtonVisible,l=e.isFocused,s=e.layoutItemsSize,u=e.maxLength,p=e.onCommitAnswer,h=e.onInputBlur,m=e.onInputFocus,f=e.onRequireStickyFooter,v=e.onStageAnswer,g=e.placeholder,y=e.recenter,k=e.t,C=e.theme,w=e.title,E=e.type,j="".concat(E,"-").concat(t),x=Kt(600),S=d()(x,2),P=S[0],A=S[1],R=Kt(1e3,!0),F=d()(R,2),D=F[0],N=F[1];Object(i.useEffect)(function(){return N(o)},[o]);var T=Object(i.useState)(),B=d()(T,2),L=B[0],M=B[1],_=Wt(L,l,s);var z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{title:{text:w,for:j,type:"label"}}),V=e.value.length>0?e.value[0]:"";return a.a.createElement(At,O()({isShaking:P},z),a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement(Xt.a,{getRef:M,placeholder:k(g),onKeyDown:function(e){Bt(E,e),e.nativeEvent.keyCode===Rt.a.ENTER&&(Object(r.j)()&&(L&&L.blur(),e.stopPropagation()),setTimeout(function(){o&&p(t)},Object(r.j)()?jr:0))},onKeyPress:function(e){Tt(E,u,e).blocked&&A(!0)},onChange:function(e){if(o){var n=e.target.value;v(t,n.slice(0,u))}},onFocus:function(){Object(r.j)()&&(m(),Object(_t.a)()||setTimeout(function(){y(Mt)},jr))},onBlur:h,maxLength:u,inputId:j,value:V,color:C.colors.secondary,forceFocusedStyle:D,type:n})),a.a.createElement(me,{buttonColor:C.colors.button,helperColor:C.colors.primary,backgroundColor:C.colors.background,onRequireStickyFooter:f,blockRef:t,isVisible:c,layoutItemsSize:s,onClick:function(e){var n=_&&Object(r.j)();L&&n&&L.blur(),e.stopPropagation(),setTimeout(function(){o&&p(t)},n?jr:0)}}))};xr.defaultProps={onCommitAnswer:G.a,onStageAnswer:G.a,t:G.a,theme:{colors:{secondary:r.b}},value:[]};var Sr=Object(i.memo)(xr,Vt),Pr=function(e){return a.a.createElement(Sr,O()({},e,{inputType:"email",onCommitAnswer:function(){e.value&&Array.isArray(e.value)&&e.value[0]&&e.onStageAnswer(e.blockRef,e.value[0].trim()),e.onCommitAnswer(e.blockRef)}}))},Ir=/\D+/g,Ar=function(e){return a.a.createElement(Sr,O()({},e,{onStageAnswer:function(t,n){n=parseInt(n.replace(Ir,""),10),e.onStageAnswer(e.blockRef,n)},maxLength:15,inputType:"tel"}))},Rr=n(682),Fr=n(200),Dr=n.n(Fr),Nr=n(641),Tr=n(680),Br=n(622),Lr=Object(c.c)(Vn.b).withConfig({displayName:"icon__StrokeIcon",componentId:"pde181-0"})(["margin-right:8px;svg{box-shadow:0 0 0 1px ",";border-radius:4px;box-sizing:content-box;background-color:#fff;}"],function(e){return Object(r.i)(e.color)?Object(r.s)("#000"):Object(r.s)("#FFF")});function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var _r=-1,zr=1e3,Vr=c.c.div.withConfig({displayName:"select__MobileWrapper",componentId:"sc-1xepqbq-0"})(["position:absolute;z-index:",";",";"],ye.j.level5,function(e){return e.isVisible?"":"pointer-events: none"}),Hr=c.c.div.withConfig({displayName:"select__DesktopWrapper",componentId:"sc-1xepqbq-1"})(["position:absolute;top:-8px;width:450px;height:300px;overflow:hidden;z-index:",";",";"],ye.j.level5,function(e){return e.isVisible?"":"pointer-events: none"});Hr.displayName="DesktopWrapper";var Wr=c.c.div.withConfig({displayName:"select__ChoiceContentWrapper",componentId:"sc-1xepqbq-2"})(["width:100%;display:flex;height:100%;align-items:center;padding:8px;height:","px;"],Object(r.j)()?44:40),Kr=c.c.div.withConfig({displayName:"select__ChoiceContentText",componentId:"sc-1xepqbq-3"})(["display:flex;height:100%;flex:1;justify-content:space-between;align-items:center;"]),qr=g()(function(e){return e},function(e,t){return Object(Ho.a)(t,e,"name").map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{name:Object(Ho.b)(t.name,e)})})}),Yr=function(e,t,n,o,r){return function(i){var c=i.code,l=i.name,s=i.prefix,u=i.svg;return a.a.createElement(I.a,{bottom:.5,left:n,right:n},a.a.createElement(bn.a,{fullHeight:!0},function(n){var i=n.hovered;return a.a.createElement(Br.a,{color:t,hovered:i||c===r||c===o,selected:c===o},a.a.createElement(Wr,null,a.a.createElement(Lr,{color:e,svg:a.a.createElement(Vn.a,{svgCode:u})}),a.a.createElement(Kr,null,a.a.createElement(S.a,{color:t,inline:!0,responsive:!0,size:"size0"},l),a.a.createElement(S.a,{color:t,inline:!0,responsive:!0,size:"size0"},"+".concat(s)))))}))}},Ur=function(e){function t(e){var n;return je()(this,t),n=Ie()(this,Re()(t).call(this,e)),b()(De()(n),"handleKeyDown",function(e){var t=e.keyCode,o=n.props,r=o.data,i=o.filterText,a=n.state.hoverIndex,c=qr(i,r),l=c.length;switch(t){case Rt.a.ARDOWN:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.min(l-1,a+1)});break;case Rt.a.ARUP:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.max(0,a-1)});break;case Rt.a.TAB:case Rt.a.ESCAPE:e.preventDefault(),e.stopPropagation(),n.props.onClose();break;case Rt.a.ENTER:e.preventDefault(),e.stopPropagation(),a===_r?l>0&&""!==i?n.handleSelection(c[0]):n.props.onClose():l>0&&n.handleSelection(c[a])}}),b()(De()(n),"handleFilterChange",function(e){n.resetHoverIndex(),n.props.onFilterChange(e)}),b()(De()(n),"handleSelection",function(e){n.props.onSelect(e),setTimeout(function(){n.props.onClose()},zr)}),n.state={hoverIndex:_r},n}return Te()(t,e),Se()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.resetHoverIndex()}},{key:"resetHoverIndex",value:function(){this.setState({hoverIndex:_r})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.filterText,o=e.isOpen,i=e.onClose,c=e.color,l=e.language,s=e.backgroundColor,u=e.innerRef,p=e.onFilterChange,d=e.value,m=e.fontFamily,f=e.t,b=f("block.countryDropdown.searchCountries"),v=f("block.countryDropdown.hint"),g=qr(n,t),y=this.state.hoverIndex,k=g.length&&g[y]?g[y].code:"";return Object(r.j)()?a.a.createElement(Vr,{ref:u,isVisible:o},a.a.createElement(Nr.a,{backgroundColor:s,color:c,filterTextPlaceholder:b,filterText:n,noResultsMessage:v,onFilterChange:p,optionRender:Yr(s,c,1,d),optionHeight:48,options:g,isVisible:o,keyProp:"code",onClose:i,onSelect:this.handleSelection,language:l,fontFamily:m,dataQa:"country-fullscreen-select",disableAnimations:h.a})):a.a.createElement(R.a,{isVisible:o,type:"slideUp"},a.a.createElement(Hr,{ref:u,isVisible:o,onKeyDown:this.handleKeyDown},a.a.createElement(Tr.a,{backgroundColor:s,color:c,filterTextPlaceholder:b,filterText:n,noResultsMessage:v,onFilterChange:this.handleFilterChange,optionRender:Yr(s,c,2,d,k),optionHeight:44,options:g,isVisible:o,keyProp:"code",onClose:i,onSelect:this.handleSelection,language:l,dataQa:"country-dropdown-select"})))}}]),t}(i.PureComponent);Ur.defaultProps={backgroundColor:r.b,color:r.b,data:[],filterText:"",fontFamily:ye.b,onClose:G.a,onFilterChange:G.a,onSelect:G.a,t:G.a};var Gr=Object(N.a)(Ur);function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var Xr=Object(c.c)(D.a).withConfig({displayName:"CountryDropdown__TriggerButton",componentId:"khpc7r-0"})(["box-shadow:0px 1px ",";",";opacity:",";cursor:pointer;padding-bottom:16px;"],function(e){return Object(r.t)(e.color)},function(e){return e.isVisible?"pointer-events: none;":""},function(e){return e.isVisible?"0":"1"}),Zr=function(e,t,n){return Dr()(function(e,t){return e.name.localeCompare(t.name)},e.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{name:n(e.code,t)})}))},Jr=function(e){function t(){var e,n;je()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=Ie()(this,(e=Re()(t)).call.apply(e,[this].concat(i))),b()(De()(n),"state",{filterText:"",sortedData:[],countryNameTranslator:function(e){return e}}),b()(De()(n),"dropdownRef",a.a.createRef()),b()(De()(n),"handleDocumentClick",function(e){n.isClickFromDropdown(n.dropdownRef.current,e.target)||!Object(r.j)()&&n.enableClickClose&&n.props.onClose()}),b()(De()(n),"handleFilterTextChange",function(e){n.setState({filterText:e})}),b()(De()(n),"isClickFromDropdown",function(e,t){var n=t;do{if(n===e)return!0;n=n.parentElement}while(null!==n);return!1}),b()(De()(n),"handleSelect",function(e){return n.props.onChange(e.code)}),n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleDocumentClick),n.e(6).then(n.bind(null,730)).then(function(t){var n=t.countryData,o=t.countryNameTranslator;e.setState({countryNameTranslator:o,sortedData:Zr(n,e.props.language,o)})}).catch(function(e){console.error("Error fetching country information: ",e)})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isOpen&&!e.isOpen?setTimeout(function(){t.enableClickClose=!0},200):!this.props.isOpen&&e.isOpen&&(this.enableClickClose=!1,this.setState({filterText:""})),this.props.language!==e.language&&this.setState({sortedData:Zr(this.state.sortedData,this.props.language,this.state.countryNameTranslator)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleDocumentClick)}},{key:"render",value:function(){var e=this.state,t=e.filterText,n=e.sortedData,o=this.props,r=o.value,c=o.isOpen,l=o.onOpen,s=o.onClose,u=o.color,p=o.language,d=o.backgroundColor,h=o.fontFamily,m=n.find(function(e){return e.code===r});return m?a.a.createElement(i.Fragment,null,a.a.createElement(Gr,{autoComplete:"tel-national",data:n,filterText:t,isOpen:c,onClose:s,color:u,language:p,backgroundColor:d,innerRef:this.dropdownRef,onFilterChange:this.handleFilterTextChange,onSelect:this.handleSelect,value:m.code,fontFamily:h}),a.a.createElement(Xr,{"data-qa":"trigger-button",onClick:l,isVisible:c,color:u,align:"center"},a.a.createElement(Lr,{color:d,svg:a.a.createElement(Vn.a,{svgCode:m.svg})}),a.a.createElement(Vn.b,{svg:qo.a,color:u}))):null}}]),t}(i.Component),$r=n(634);function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var ti=700,ni=15,oi=/^[A-Za-z]+$/,ri=/[^0-9a-zA-Z]+/gi,ii=Object(c.c)(I.a).withConfig({displayName:"PhoneNumber__Root",componentId:"ver6na-0"})(["display:flex;align-items:flex-end;max-width:450px;"]),ai=Object(c.c)(I.a).withConfig({displayName:"PhoneNumber__DropdownWrapper",componentId:"ver6na-1"})(["position:relative;z-index:",";"],ye.j.level1),ci=function(e){function t(){var e,n;je()(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=Ie()(this,(e=Re()(t)).call.apply(e,[this].concat(i))),b()(De()(n),"state",{isOpen:!1,isShaking:!1,getExampleNumber:null}),b()(De()(n),"getInputRef",function(e){return n.textInput=e}),b()(De()(n),"getValue",function(e){return e.value&&e.value.length>0?e.value[0]:{}}),b()(De()(n),"getNumber",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).number||""}),b()(De()(n),"getCountryCode",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).countryCode||e.defaultCountryCode.toUpperCase()}),b()(De()(n),"getPlaceholder",function(e){return n.state.getExampleNumber?n.state.getExampleNumber(e,Rr).formatNational():""}),b()(De()(n),"handleKeyPress",function(e){if(String.fromCharCode(e.charCode).match(oi))return e.preventDefault(),void n.shake();Object($r.c)(n.getCountryCode(),e.target.value).replace(ri,"").length>ni&&(e.preventDefault(),n.shake())}),b()(De()(n),"handleKeyDown",function(e){e.nativeEvent.keyCode===Rt.a.ENTER&&(Object(r.j)()&&n.textInput&&n.textInput.blur(),e.stopPropagation(),setTimeout(function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)},Object(r.j)()?ti:0))}),b()(De()(n),"handleValueChange",function(e,t){var o=e;try{o=n.parsePhoneNumber(e,t).formatInternational()}catch(e){}n.props.isActive&&n.props.onStageAnswer(n.props.blockRef,{number:e,countryCode:t,label:o})}),b()(De()(n),"handleNumberChange",function(e){var t=e.target.value,o=n.getNumber(),r=n.getCountryCode(),i=n.guessCountryBasedOnNumber(t)||r,a=i!==r;n.AsYouType&&a&&n.createCountryFormatter(i),n.parseDigits(t)!==n.parseDigits(o)&&(t=n.formatPhoneNumber(t)),n.handleValueChange(t,i)}),b()(De()(n),"handleCountryChange",function(e){if(e!==n.getCountryCode()){n.AsYouType&&n.createCountryFormatter(e);var t=n.formatPhoneNumber(n.getNumber());n.handleValueChange(t,e)}}),b()(De()(n),"handleDropdownOpen",function(){n.props.recenter(Mt),n.setState({isOpen:!0})}),b()(De()(n),"handleDropdownClose",function(){n.setState({isOpen:!1}),Object(r.j)()||n.textInput.focus()}),b()(De()(n),"handleCommit",function(e){var t=n.isInputFocused()&&Object(r.j)();n.textInput&&t&&n.textInput.blur(),e.stopPropagation(),setTimeout(function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)},t?ti:0)}),n}return Te()(t,e),Se()(t,[{key:"componentDidMount",value:function(){var e=this;n.e(0).then(n.bind(null,287)).then(function(t){var n=t.AsYouType,o=t.parseDigits,r=t.parsePhoneNumber,i=t.getExampleNumber;e.AsYouType=n,e.formatter=new n(e.getCountryCode()),e.parseDigits=o,e.parsePhoneNumber=r,e.setState({getExampleNumber:i})}).catch(function(e){console.error("Error fetching phone library: ",e)}),this.updateInputFocus(this.textInput,this.props.isActive),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.textInput,e.props.isActive)})}},{key:"componentDidUpdate",value:function(e){var t=this.getCountryCode(e),n=this.getCountryCode();this.AsYouType&&t!==n&&this.createCountryFormatter(n),this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"createCountryFormatter",value:function(e){this.formatter=new this.AsYouType(e)}},{key:"formatPhoneNumber",value:function(e){return this.parseDigits&&(e=this.formatter.input(e),this.formatter.reset()),e}},{key:"guessCountryBasedOnNumber",value:function(e){this.formatter.input(e);var t=this.formatter.country||this.formatter.metadata._country;return this.formatter.reset(),t}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout(function(){return e.setState({isShaking:!1})},600)}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&!this.state.isOpen&&(t?!Object(r.j)()&&te(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"render",value:function(){var e=this.props,t=e.blockRef,n=e.isCommitButtonVisible,o=e.language,r=e.layoutItemsSize,i=e.theme,c=e.title,l=e.onRequireStickyFooter,s=this.state.isOpen,u=this.getNumber(),p=this.getCountryCode(),d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{title:{text:c,type:"label"}});return a.a.createElement(At,O()({isShaking:this.state.isShaking},d),a.a.createElement(ii,{top:4,bottom:2},a.a.createElement(ai,{right:2},a.a.createElement(Jr,{backgroundColor:i.colors.background,color:i.colors.secondary,isOpen:s,language:o,onClose:this.handleDropdownClose,onOpen:this.handleDropdownOpen,value:p,onChange:this.handleCountryChange,fontFamily:i.font})),a.a.createElement(Xt.a,{getRef:this.getInputRef,inputId:"phone-number-".concat(t),color:i.colors.secondary,value:u,placeholder:this.getPlaceholder(p),onChange:this.handleNumberChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,type:"tel",autoComplete:"tel-national",dataQa:"phone-number-input",showBorder:!0})),a.a.createElement(me,{buttonColor:i.colors.button,helperColor:i.colors.primary,backgroundColor:i.colors.background,onRequireStickyFooter:l,blockRef:t,isVisible:n,layoutItemsSize:r,onClick:this.handleCommit}))}}]),t}(i.Component);b()(ci,"defaultProps",{defaultCountryCode:"US",theme:{colors:{secondary:r.b,background:r.b}},recenter:function(){}});var li=ci,si=function(e){return a.a.createElement(Sr,O()({},e,{maxLength:e.validations.maxLength}))};si.defaultProps={validations:{maxLength:null}};var ui=si,pi=new RegExp(/(https?|ftp|app):\/\//),di=function(e){return a.a.createElement(Sr,O()({},e,{onCommitAnswer:function(){var t=Array.isArray(e.value)?e.value[0]:e.value;t&&!pi.test(t)&&e.onStageAnswer(e.blockRef,"".concat("https://").concat(t)),e.onCommitAnswer(e.blockRef)},inputType:"url"}))},hi=n(652),mi=n.n(hi),fi=n(110),bi=n(197);function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yi=function(e,t){var n=hi.textSizes[t],o="sm"===t?-1:0,i={color:"".concat(e),lineHeight:"".concat(n.lineHeight,"px"),letterSpacing:"".concat(o,"px"),fontSize:"".concat(n.fontSize,"px"),fontWeight:"".concat(ye.c.regular),fontFamily:"".concat(ye.a),fontSmoothing:"antialiased"};return{base:gi({},i,{"::placeholder":gi({},i,{color:"".concat(Object(r.t)(e))})})}},ki=c.c.span.withConfig({displayName:"StripePayment__PriceTag",componentId:"sc-1jeyk0z-0"})(["font-weight:bold;"]);ki.displayName="PriceTag";var Ci=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).stripeElement=null,n.cardName=null,n.cardNumber=null,n.state={cardError:null,isCardNumberFocused:!1,isCardNameFocused:!1},n.handleCommit=n.handleCommit.bind(De()(n)),n.handleCardNumberChange=n.handleCardNumberChange.bind(De()(n)),n.handleCardEnter=n.handleCardEnter.bind(De()(n)),n.handleCardNumberFocus=n.handleCardNumberFocus.bind(De()(n)),n.handleCardNumberBlur=n.handleCardNumberBlur.bind(De()(n)),n.handleCardNameKeyDown=n.handleCardNameKeyDown.bind(De()(n)),n.handleCardNameChange=n.handleCardNameChange.bind(De()(n)),n.handleCardNameFocus=n.handleCardNameFocus.bind(De()(n)),n.handleCardNameBlur=n.handleCardNameBlur.bind(De()(n)),n.getAnswerValue=n.getAnswerValue.bind(De()(n)),n.focustimeout=null,n}return Te()(t,e),Se()(t,[{key:"updateCardFocus",value:function(e){var t=this;Object(r.j)()||!this.props.isFocused||this.state.isCardNameFocused||this.state.isCardNumberFocused||!te(e,this.props.layoutItemsSize)||(clearTimeout(this.focustimeout),this.focustimeout=setTimeout(function(){t.props.isActive&&t.stripeElement.focus()},100))}},{key:"componentDidMount",value:function(){var e=dn()(un.a.mark(function e(){var t,n,o,i,a,c,l=this;return un.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.theme,o=t.breakpoint,i=t.isActive,a=t.isFocused,c={hidePostalCode:!0,hideIcon:!0,style:yi(n.colors.secondary,o)},e.prev=2,e.next=5,Object(fi.a)(c);case 5:this.stripeElement=e.sent,this.stripeElement.on("change",this.handleCardNumberChange),this.stripeElement.on("focus",this.handleCardNumberFocus),this.stripeElement.on("blur",this.handleCardNumberBlur),this.stripeElement.on("ready",function(){!Object(r.j)()&&i&&a&&l.stripeElement.focus()}),this.stripeElement.mount(this.cardNumber),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0.message);case 16:this.props.handleAppScroll(function(){l.props.isActive&&l.updateCardFocus(l.cardNumber)});case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stripeElement&&this.stripeElement.destroy(),this.stage(this.props.blockRef,{cardholdersName:"",isCardValid:!1,isCardEmpty:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.theme,o=t.breakpoint,r=t.isActive,i=n.colors.secondary,a=e.theme.colors.secondary;this.stripeElement&&(r||(this.state.isCardNameFocused&&this.cardName&&this.cardName.blur(),this.state.isCardNumberFocused&&this.stripeElement.blur()),e.breakpoint===o&&a===i||this.stripeElement.update({style:yi(i,o)}))}},{key:"preventInputBlur",value:function(){var e=this;this.preventBlur=!0,setTimeout(function(){return e.preventBlur=!1},300),clearTimeout(this.inputBlurTimeout)}},{key:"handleInputBlur",value:function(){var e=this;this.inputBlurTimeout=setTimeout(function(){!e.preventBlur&&e.props.onInputBlur()},100)}},{key:"handleTouchRecentering",value:function(){var e=this;Object(r.j)()&&!Object(_t.a)()&&setTimeout(function(){e.props.recenter(Mt,Mt)},700)}},{key:"handleCardNumberFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNumberFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNumberBlur",value:function(){this.setState({isCardNumberFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNameFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNameBlur",value:function(){this.setState({isCardNameFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameKeyDown",value:function(e){if(e.keyCode===Rt.a.TAB&&e.shiftKey)return this.stripeElement.focus(),void e.stopPropagation();var t=this.getAnswerValue(),n=t.cardholdersName,o=t.isCardValid;e.keyCode===Rt.a.ENTER&&o&&n&&(this.handleCommit(),this.cardName&&this.cardName.blur())}},{key:"handleCommit",value:function(){var e=this;setTimeout(function(){e.props.isActive&&e.props.onCommitAnswer(e.props.blockRef)},0)}},{key:"handleCardEnter",value:function(){this.cardName&&this.cardName.focus()}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length&&e[0]?e[0]:{}}},{key:"stage",value:function(e,t){if(t&&!t.cardholdersName&&t.isCardEmpty)return this.props.onStageAnswer(e,[]);this.props.onStageAnswer(e,[t])}},{key:"handleCardNameChange",value:function(e){this.stage(this.props.blockRef,gi({},this.getAnswerValue(),{cardholdersName:e.target.value}))}},{key:"handleCardNumberChange",value:function(e){this.setState({cardError:e.error}),this.stage(this.props.blockRef,gi({},this.getAnswerValue(),{isCardValid:e.complete,isCardEmpty:e.empty}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.breakpoint,r=t.buttonText,i=t.isCommitted,c=t.isReviewModeEnabled,l=t.layoutItemsSize,s=t.price,u=t.theme,p=t.stripeErrorCodes,d=t.validations,h=t.onRequireStickyFooter,m=t.t,f=this.state.cardError,b=this.getAnswerValue(),v=b.cardholdersName,g=b.isCardValid,y=void 0!==g&&g,k=b.isCardEmpty,C=void 0===k||k,w=d&&d.required,E=i||c,j=!!v,x=E&&!j&&(!C||w),S=f||E&&(C||!y)&&(j||w),P=p[f&&f.code]||"label.error.required",A=this.props.isCommitButtonVisible&&y&&j;return a.a.createElement(At,O()({},this.props,{validationError:null,title:{text:this.props.title,for:this.inputId,type:"label"}}),a.a.createElement(I.a,{top:1},a.a.createElement(_e.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintCharge")," ",a.a.createElement(ki,null,s)),a.a.createElement(_e.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintStore"))),a.a.createElement(I.a,{bottom:2},a.a.createElement(mi.a,{breakpoint:o,color:u.colors.secondary,cardNameRef:function(t){return e.cardName=t},cardName:v||"",cardNameErrorMessage:Object(T.a)(m("label.error.required")),cardNamePlaceholder:m("block.payment.placeholder.cardName"),onCardNameChange:this.handleCardNameChange,onCardNameKeyDown:this.handleCardNameKeyDown,onCardNameFocus:this.handleCardNameFocus,onCardNameBlur:this.handleCardNameBlur,isCardNameErrorVisible:!!x,cardNumberRef:function(t){return e.cardNumber=t},cardNumberErrorMessage:Object(T.a)(m(P)),isCardNumberFocused:this.state.isCardNumberFocused,isCardNumberErrorVisible:!!S,onCardNumberEnterPressed:this.handleCardEnter,stripeLinkText:m("block.payment.securedBy")})),a.a.createElement(me,{buttonColor:u.colors.button,helperColor:u.colors.primary,backgroundColor:u.colors.background,onRequireStickyFooter:h,hideIcon:!0,blockRef:n,label:r,onClick:this.handleCommit,isVisible:A,layoutItemsSize:l}))}}]),t}(i.PureComponent);Ci.defaultProps={breakpoint:"lg",theme:{colors:{primary:r.b,secondary:r.b}},handleAppScroll:function(){},onInputFocus:function(){},onInputBlur:function(){},recenter:function(){},t:function(e){return e},value:[{cardholdersName:"",isCardEmpty:!0,isCardValid:!1}],stripeErrorCodes:{}};var wi,Oi=Object(o.b)(function(e){return{price:Object(ue.qb)(e),stripeErrorCodes:bi.a}})(Object(ve.withBreakpoint)(Ci)),Ei=(wi={},b()(wi,Qe.a.date,{component:Object(N.a)(ln)}),b()(wi,Qe.a.dropdown,{component:Object(N.a)(tr)}),b()(wi,Qe.a.email,{component:Object(N.a)(Pr)}),b()(wi,Qe.a.fileUpload,{component:Object(N.a)(bo)}),b()(wi,Qe.a.group,{component:pr}),b()(wi,Qe.a.legal,{component:Object(N.a)(Or)}),b()(wi,Qe.a.longText,{component:Object(N.a)(Gt)}),b()(wi,Qe.a.multipleChoice,{component:Object(N.a)(No)}),b()(wi,Qe.a.number,{component:Object(N.a)(Ar)}),b()(wi,Qe.a.opinionScale,{component:lr}),b()(wi,Qe.a.pictureChoice,{component:Object(N.a)(zo)}),b()(wi,Qe.a.rating,{component:br}),b()(wi,Qe.a.shortText,{component:Object(N.a)(ui)}),b()(wi,Qe.a.statement,{component:dr}),b()(wi,Qe.a.website,{component:Object(N.a)(di)}),b()(wi,Qe.a.yesNo,{component:Object(N.a)(Cr)}),b()(wi,Qe.a.payment,{component:Object(N.a)(Oi)}),b()(wi,Qe.a.phoneNumber,{component:Object(N.a)(li)}),wi),ji={component:Object(N.a)(yr)},xi=function(e){var t=e.type,n=C()(e,["type"]),o=Ei.hasOwnProperty(t)?Ei[t]:ji;return a.a.createElement(o.component,Object.assign({type:t},n,o.props))},Si=n(3);function Pi(){return function(e){setTimeout(function(){e({type:Si.K,payload:{isInputFocused:!1}})},50)}}function Ii(){return{type:Si.K,payload:{isInputFocused:!0}}}var Ai=n(311);function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Di=g()(JSON.stringify,ce.g),Ni=Object(o.b)(function(e,t){var n=t.blockRef,o=function(e,t){var n=null;return function(o,r){var i=Object(le.d)(o,r),a=Object(ce.b)(o,r),c=Object(le.f)(o,i),l=a&&Object(ce.d)(a),s=Object(de.e)(o);if(n&&!c&&n.isActive===c&&n.theme===s&&n.isCommitted===l)return n;var u=!Object(ce.o)(i.type,a),p=Fi({},i,{blockIndex:Object(le.e)(o,r),isFirstBlock:0===Object(le.e)(o,r),title:e(o),description:t(o),formId:Object(ae.e)(o),isAnswered:u,isActive:c,theme:s,isCommitted:l,isFocused:c&&Object(le.a)(o),canUpdateFocus:Object(le.a)(o),isReviewModeEnabled:Object(ae.n)(o),isValid:a&&Object(ce.e)(a),isVisible:Object(le.h)(o,i),isScrollNearTop:Object(ae.o)(o),validationError:Object(ce.f)(o,i),isCommitButtonVisible:Object(le.t)(o,r),isVisibleGroupStickyHeader:Object(ae.i)(o),isLivePreview:Object(ae.l)(o),language:Object(ae.s)(o),shouldClearInput:!u&&Object(ae.l)(o),value:Di(a),scrolling:Object(ae.x)(o),ref:void 0});return n=p,p}}(Object(ue.y)(n),Object(ue.r)(n));return function(e){return o(e,n)}},function(e){return Fi({},Object(y.b)({onCommitAnswer:u.c,onStageAnswer:u.v,scrollTo:u.f,recenter:u.n,scrollToChoice:u.t,endAutoScroll:u.e,goToNextBlock:u.h,goToPreviousBlock:u.j,onInputFocus:Ii,onInputBlur:Pi,onRequireStickyFooter:u.o,onRequireStickyHeader:u.p},e),{handleAppScroll:function(e,t){return Object(Ai.onAction)(e).bind(null,t)}(e,Si.d)})})(xi),Ti=n(633),Bi=n(651),Li=n.n(Bi),Mi=300,_i=500,zi=c.c.div.withConfig({displayName:"MouseWheelTrigger__Root",componentId:"sc-1nbmmxo-0"})(["outline:none;width:100%;"]),Vi=function(e){function t(){var e,n;je()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=Ie()(this,(e=Re()(t)).call.apply(e,[this].concat(r))),b()(De()(n),"Lethargy",new Li.a),b()(De()(n),"accumulated",0),b()(De()(n),"timeout",null),b()(De()(n),"disableTimeout",null),b()(De()(n),"disabledSwipe",!1),b()(De()(n),"handleWheelScroll",function(e){var t=n.props,o=t.upHandler,r=t.downHandler,i=n.Lethargy.check(e),a=e.deltaY;n.disabledSwipe||!1===i||(n.accumulated+=a,n.setTimeout(function(){n.accumulated=0})),n.accumulated<-Mi&&(o(),n.accumulated=0,n.disableSwipe(_i)),n.accumulated>Mi&&(r(),n.accumulated=0,n.disableSwipe(_i))}),n}return Te()(t,e),Se()(t,[{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(e,500)})},{key:"disableSwipe",value:function(e){var t=this;this.disableTimeout&&clearTimeout(this.disableTimeout),this.disabledSwipe=!0,this.disableTimeout=setTimeout(function(){t.disabledSwipe=!1},e)}},{key:"render",value:function(){return a.a.createElement(zi,{style:this.props.customStyle,onWheel:this.handleWheelScroll,tabIndex:"0"},this.props.children)}}]),t}(i.Component),Hi=n(216),Wi=function(e){function t(){return je()(this,t),Ie()(this,Re()(t).apply(this,arguments))}return Te()(t,e),Se()(t,[{key:"render",value:function(){var e=this,t=this.props.fullHeight?{height:"100%"}:{};return a.a.createElement(Vi,{customStyle:t,upHandler:function(){e.props.canSwipePrevious&&(e.props.goToPreviousBlock(),Object(Hi.a)("changeBlock",{direction:"previous",method:"wheel"}))},downHandler:function(){e.props.canSwipeNext&&(e.props.goToNextBlock(),Object(Hi.a)("changeBlock",{direction:"next",method:"wheel"}))}},a.a.createElement(Ti.a,O()({style:t,onSwiped:function(t){e.swipping=!1;var n=e.props,o=n.canSwipeNext,r=n.canSwipePrevious;Math.abs(t.deltaY)>50/t.velocity&&("Up"===t.dir?o&&!e.blockSwipeNext&&(e.props.goToNextBlock(),Object(Hi.a)("changeBlock",{direction:"next",method:"swipe"})):"Down"===t.dir&&r&&!e.blockSwipePrevious&&(e.props.goToPreviousBlock(),Object(Hi.a)("changeBlock",{direction:"previous",method:"swipe"})))},onSwiping:function(){if(e.swipping)return!1;var t=e.props,n=t.canSwipeNext,o=t.canSwipePrevious;e.blockSwipeNext=!n,e.blockSwipePrevious=!o,e.swipping=!0}},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),this.props.children))}}]),t}(i.PureComponent),Ki=n(57),qi=n(233),Yi=n(203),Ui=n(243),Gi=n.n(Ui);function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var Xi=function(e){var t=e.children,n=e.isVisible,o=e.duration,r=void 0===o?200:o,c=e.visibleStyle,l=void 0===c?{opacity:1}:c,s=e.invisibleStyle,u=void 0===s?{opacity:0}:s,p=Object(i.useState)(n),h=d()(p,2),m=h[0],f=h[1],v=Object(i.useState)(n?l:u),g=d()(v,2),y=g[0],k=g[1],C=Object(i.useRef)();return Object(i.useEffect)(function(){clearTimeout(C.current),n?(f(!0),C.current=setTimeout(function(){return k(l)},0)):(k(u),C.current=setTimeout(function(){return f(!1)},r+200))},[n]),a.a.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:m?"block":"none",transition:"all ease ".concat(r,"ms")},y)},t)};function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $i={x:0,y:0};function ea(e){var t=e.amount,n=e.cover,o=e.children;return t?a.a.createElement(Gi.a,{cover:n,brightness:t},o):o}var ta=c.c.div.withConfig({displayName:"layout-media__Root",componentId:"m15s05-0"})(["position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:",";transition:opacity 0.2s ease ","s;pointer-events:none;z-index:",";"],function(e){return e.isVisible?1:0},function(e){return e.isVisible?.2:0},function(e){return e.isBackground?ye.j.levelN1:"auto"}),na=c.c.div.withConfig({displayName:"layout-media__Wrapper",componentId:"m15s05-1"})(["position:absolute;top:0;left:",";right:0;bottom:0;background:",";"],function(e){return e.fullWidth?0:"50%"},function(e){return Object(r.u)(Object(r.e)(e.contextBackgroundColor,.02,.8,1,.9))}),oa=c.c.div.withConfig({displayName:"layout-media__AttachmentWrapper",componentId:"m15s05-2"})(["position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;"],function(e){return e.paddingLeft},function(e){return e.paddingRight},function(e){return e.paddingTop},function(e){return e.paddingBottom}),ra=[Xe.a.SPLIT.DESKTOP,Xe.a.FLOAT.DESKTOP,Xe.a.WALLPAPER.DESKTOP,Xe.a.WALLPAPER.MOBILE],ia=function(e){var t=e.blocks,n=e.areBlocksVisible,o=e.currentRef,r=e.nextRef,i=e.previousRef,c=e.theme,l=e.forceBreakpoint,s=Object(ve.useBreakpoint)();l&&(s=l);var u=t.find(function(e){return e.ref===o}),p=ge(be()(Xe.b.STACK,["layout","type"],u),s),d=n&&ra.includes(p),h=p===Xe.a.WALLPAPER.DESKTOP||p===Xe.a.WALLPAPER.MOBILE;return a.a.createElement(ta,{isVisible:d,isBackground:h},t.map(function(e){if(!e.attachment||!e.layout)return null;var t=ge(e.layout.type,s),n=e.attachment.type===Yi.b?0:be()(0,["layout","attachment","properties","brightness"],e),l=be()($i,["layout","attachment","properties","focalPoint"],e),u=t===Xe.a.SPLIT.DESKTOP||t===Xe.a.WALLPAPER.DESKTOP||t===Xe.a.WALLPAPER.MOBILE,p=u?0:Object(at.b)(s),d=e.ref===o,h=e.ref===i,m=e.ref===r;if(!((d||h||m)&&ra.includes(t)))return null;var f=e.attachment.type===Yi.b?Ji({},e.attachment,{resource:Ji({},e.attachment.resource,{scale:1})}):e.attachment,b=t===Xe.a.WALLPAPER.DESKTOP||t===Xe.a.WALLPAPER.MOBILE;return a.a.createElement(Xi,{key:e.ref,isVisible:e.ref===o},a.a.createElement(na,{contextBackgroundColor:c.colors.background,fullWidth:b},a.a.createElement(oa,{paddingTop:p,paddingBottom:p,paddingLeft:p,paddingRight:p},a.a.createElement(ea,{cover:u,amount:n},a.a.createElement(Ge.a,O()({cover:u},f,{focalPoint:l,isHighDefinition:b,isCentered:!0}))))))}))};ia.defaultProps={theme:{colors:{background:r.b}}};var aa=ia,ca=c.c.div.withConfig({displayName:"BlockList__Root",componentId:"ny54fa-0"})(["height:100%;"]),la=c.c.div.withConfig({displayName:"BlockList__BlockListContainer",componentId:"ny54fa-1"})(["overflow:hidden;height:100%;width:100%;position:relative;"]);c.c.div.withConfig({displayName:"BlockList__Separator",componentId:"ny54fa-2"})(["padding-top:","px;padding-bottom:","px;"],function(e){return e.top},function(e){return e.bottom}).displayName="Separator";var sa=h.a?0:400,ua=Object(c.d)(["0%{opacity:0;transform:translateY(-","px);}33%{opacity:0;transform:translateY(-","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),pa=Object(c.b)(["animation:"," ","ms forwards;"],ua,qi.a),da=Object(c.d)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(","px);}"],400),ha=Object(c.b)(["animation:"," ","ms forwards;"],da,sa),ma=Object(c.d)(["0%{opacity:0;transform:translateY(","px);}33%{opacity:0;transform:translateY(","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),fa=Object(c.b)(["animation:"," ","ms forwards;"],ma,qi.a),ba=Object(c.d)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(-","px);}"],400),va=Object(c.b)(["animation:"," ","ms forwards;"],ba,sa),ga=c.c.div.withConfig({displayName:"BlockList__Wrapper",componentId:"ny54fa-3"})(["visibility:",";position:absolute;width:100%;height:100%;padding-top:","px;will-change:transform;",";",";",";",";",";"],function(e){return e.isVisible?"visible":"hidden"},function(e){return e.topOffset},function(e){return e.isVisible&&e.appearing&&e.isNavigatingForward&&fa},function(e){return e.isVisible&&e.fading&&e.isNavigatingForward&&va},function(e){return e.isVisible&&e.appearing&&!e.isNavigatingForward&&pa},function(e){return e.isVisible&&e.fading&&!e.isNavigatingForward&&ha},function(e){return e.fading&&"pointer-events: none"}),ya=function(e){function t(){e.onScroll()}var n=e.blocks,o=e.theme,r=e.currentRef,c=e.currentPath,l=e.isBlockChanging,s=e.previousActiveRef,u=e.previousRef,p=e.nextRef,h=e.layoutItemsSize,f=e.isInlineSubmitEnabled,b=e.isVisible,v=e.component,g=e.goToPreviousBlock,y=e.goToNextBlock,k=function(e,t){return f||t!==Ki.a?function(e,t){return e.findIndex(function(e){return e.ref===t})}(e,t):e.length},C=Object(m.a)(c),w=k(n,r),O=k(n,s),E=s===r||O<w;Object(i.useEffect)(function(){setTimeout(function(){return e.onScroll()},qi.a)},[r]);var j=Object(i.useState)(!1),x=d()(j,2),S=x[0],P=x[1],I=Object(i.useState)(!1),A=d()(I,2),R=A[0],F=A[1],D=function(e){var t=e.next,n=e.previous;P(t),F(n)};return a.a.createElement(ca,{onKeyDown:function(t){var n=t.keyCode,o=t.shiftKey,r=n===Rt.a.ARUP||n===Rt.a.TAB&&o,i=n===Rt.a.ARDOWN||n===Rt.a.TAB;n===Rt.a.ENTER?(Object(Hi.a)("changeBlock",{direction:"next",method:"keyboard"}),e.goToNextBlockFollowingLogic(e.currentRef),t.preventDefault()):r?(Object(Hi.a)("changeBlock",{direction:"previous",method:"keyboard"}),e.goToPreviousBlock(),t.preventDefault()):i&&(Object(Hi.a)("changeBlock",{direction:"next",method:"keyboard"}),e.goToNextBlock(),t.preventDefault())}},a.a.createElement(ee.Provider,{value:l},a.a.createElement(Wi,{goToPreviousBlock:g,goToNextBlock:y,canSwipeNext:S,canSwipePrevious:R,fullHeight:!0},a.a.createElement(la,null,n.map(function(n){var o=n.ref===r,i=n.ref===u,l=n.ref===s,d=n.ref===p,m="payment"===n.type,f="date"===n.type,g=b&&(o||l);return g||o||i||d||(m||f)?a.a.createElement(ga,{key:n.ref,isVisible:g,appearing:r===n.ref,fading:r!==n.ref,isNavigatingForward:E,onScroll:t,topOffset:e.topOffset},a.a.createElement(v,{onChangeCanSwipe:D,blockRef:n.ref,layoutItemsSize:h,listIndexText:C[k(c,n.ref)]})):null}))),a.a.createElement(aa,{areBlocksVisible:b,theme:o,blocks:n,currentRef:r,previousRef:u,nextRef:p})))};ya.defaultProps={blocks:[],component:Ni};var ka=ya,Ca=n(199),wa=n(55),Oa=function(e){return e&&e.attachment&&"image"===e.attachment.type&&e.attachment.resource&&e.attachment.resource.src},Ea={onScroll:u.a,goToNextBlockFollowingLogic:u.i,goToNextBlock:u.h,goToPreviousBlock:u.j,onEndAutoScroll:u.e},ja=Object(o.b)(function(e){var t=Object(r.j)()&&Object(ae.k)(e),n=!Object(wa.a)(e)&&!t&&Object(ae.i)(e),o=n?Object(ae.A)(e):null,i=Oa(o),a=0;n&&(a=i?88:60);var c=Object(ae.b)(e);return{blocks:Object(le.k)(e),currentPath:Object(Ca.a)(e),currentRef:c,isInlineSubmitEnabled:Object(ae.j)(e),nextRef:Object(Ca.b)(e,c),previousActiveRef:Object(ae.t)(e),previousRef:Object(le.s)(e),scrolling:Object(ae.x)(e),isBlockChanging:Object(ae.g)(e),theme:Object(de.e)(e),topOffset:a}},Ea)(ka),xa=c.c.section.withConfig({displayName:"UnfixedFooter__FooterWrapper",componentId:"sc-13oi4zw-0"})(["position:absolute;bottom:0;width:100%;pointer-events:",";opacity:",";transition:opacity 0.3s ease;overflow:hidden;outline:0;z-index:5;height:100%;"],function(e){return e.isActive?"auto":"none"},function(e){return e.isActive?1:0}),Sa=c.c.section.withConfig({displayName:"UnfixedFooter__FooterBackground",componentId:"sc-13oi4zw-1"})(["height:100%;"]),Pa=c.c.div.withConfig({displayName:"UnfixedFooter__FooterContent",componentId:"sc-13oi4zw-2"})(["padding-top:30px;height:50%;width:100%;border-top:1px solid ",";transition:transform 300ms ",";transform:translateY(",");position:absolute;bottom:0;"],function(e){return Object(r.g)(e.contextBackgroundColor)},function(e){return e.active?"cubic-bezier(0, 0.51, 0.1, 1.01)":"cubic-bezier(0.72, 0.2, 0.9, 0.39)"},function(e){return e.active?0:"100%"}),Ia=c.c.div.withConfig({displayName:"UnfixedFooter__FooterErrorMessage",componentId:"sc-13oi4zw-3"})(["padding:12px 0;background-color:rgba(153,0,0,0.8);border:1px solid rgba(0,0,0,0.15);position:absolute;width:100%;z-index:10;bottom:50%;"]),Aa=function(e){var t=e.visible,n=e.timeout,o=e.color,r=e.onRetryClick;return t?a.a.createElement(I.a,{top:2},a.a.createElement(U,{messageKey:"label.warning.slowSubmission",color:o,actionLink:a.a.createElement(q,{color:o,isEnabled:0!==n,onClick:r,timeout:n})})):null},Ra=function(e){var t=e.visible,n=e.centered,o=e.color,r=e.warningText,i=e.actionText;return t&&a.a.createElement(D.a,{position:n?"center":"left"},a.a.createElement(I.a,{top:2},a.a.createElement(S.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},r," - ",a.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},i))))},Fa=function(e){function t(e){var n;return je()(this,t),n=Ie()(this,Re()(t).call(this,e)),b()(De()(n),"getUnfixedFooterRef",function(e){return n.unfixedFooterRef=e}),n.handlePreviousBlockNavigation=n.handlePreviousBlockNavigation.bind(De()(n)),n.handleBlockKeyboardEvent=n.handleBlockKeyboardEvent.bind(De()(n)),n.handleSubmitAction=n.handleSubmitAction.bind(De()(n)),n.handleRetryClick=n.handleRetryClick.bind(De()(n)),n.handleSwipe=n.handleSwipe.bind(De()(n)),n}return Te()(t,e),Se()(t,[{key:"componentDidUpdate",value:function(){this.props.isFocused&&this.unfixedFooterRef&&this.unfixedFooterRef.focus()}},{key:"handlePreviousBlockNavigation",value:function(){this.props.goToPreviousBlock()}},{key:"handleSubmitAction",value:function(){this.props.submitForm(),this.props.isReviewModeEnabled&&this.props.invalidAnswersAmount&&this.props.reviewForm()}},{key:"handleBlockKeyboardEvent",value:function(e){e.keyCode===Rt.a.ENTER&&this.handleSubmitAction()}},{key:"handleRetryClick",value:function(){this.props.resetRetryCount(),this.props.submitForm()}},{key:"handleSwipe",value:function(e){Math.abs(e.deltaY)>50/e.velocity&&"Down"===e.dir&&this.props.goToPreviousBlock()}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isVisible,o=e.showPhishingMessage,r=e.errorMessageId,i=e.isButtonFullWidth,c=e.isLivePreview,l=e.isReviewModeEnabled,s=e.isPaymentBlockAnswered,u=e.invalidAnswersAmount,p=e.submit,d=e.price,h=e.theme,m=e.t;return a.a.createElement(Vi,{upHandler:this.handlePreviousBlockNavigation,downHandler:G.a},a.a.createElement(Ti.a,O()({onSwiped:this.handleSwipe},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),a.a.createElement(xa,{isActive:t&&n,tabIndex:"-1","data-qa":"unfixed-footer",onKeyDown:this.handleBlockKeyboardEvent,id:Ki.a,ref:this.getUnfixedFooterRef,backgroundColor:h.colors.background},t&&r&&a.a.createElement(Ia,null,a.a.createElement(at.a,null,a.a.createElement(S.a,{size:"sizeN1",color:"#fff",fontWeight:"regular",useDefaultFont:!0},m(r,{answerAmount:u})))),a.a.createElement(Sa,{isActive:t,backgroundColor:h.colors.background,onClick:this.handlePreviousBlockNavigation}),a.a.createElement(Pa,{contextBackgroundColor:h.colors.background,active:t,"data-qa":t?"unfixed-footer--active":"",backgroundColor:h.colors.background},a.a.createElement(at.a,null,a.a.createElement(R.a,{isVisible:!p.isComplete,type:"fade",duration:200},a.a.createElement(D.a,{position:i?"center":"left"},a.a.createElement(_,{isLivePreview:c,isReviewModeEnabled:l&&u>0,isPaymentBlockAnswered:s,isSubmitting:p.isSubmitting,isComplete:p.isComplete,fullWidth:i,centered:i,onClick:this.handleSubmitAction,price:d,theme:h}))),a.a.createElement(Ra,{color:h.colors.primary,warningText:m("label.warning.phishing"),actionText:m("label.action.phishing"),visible:o,centered:i}),a.a.createElement(Aa,{timeout:p.retry.timeout,visible:p.retry.showMessage,color:h.colors.primary,onRetryClick:this.handleRetryClick}))))))}}]),t}(i.PureComponent);Fa.defaultProps={showPhishingMessage:!0,errorMessageId:null,submit:{retry:{},isComplete:!1,isSubmitting:!1},submitForm:G.a,size:{width:800},theme:{colors:{primary:r.b,background:r.b}},t:function(e){return e}};var Da=Object(N.a)(function(e){return a.a.createElement(ve.ResponsiveConsumer,null,function(t){var n=t.width<ye.e.md&&!e.isLivePreview;return a.a.createElement(Fa,O()({isButtonFullWidth:n},e))})}),Na=n(143),Ta={reviewForm:u.g,submitForm:u.w,resetRetryCount:u.q,goToPreviousBlock:u.j},Ba=Object(o.b)(function(e){var t=Object(ce.n)(e),n=Object(ae.n)(e),o=Object(se.h)(e);return t&&(o=1===t?"label.error.incompleteAnswer":"label.error.incompleteAnswers"),{submit:Object(se.g)(e),showPhishingMessage:Object(pe.d)(e),isActive:Object(Na.a)(e),isFocused:Object(Na.b)(e),isLivePreview:Object(ae.l)(e),isPaymentBlockAnswered:Object(ce.r)(e),isReviewModeEnabled:n,invalidAnswersAmount:t,errorMessageId:o,theme:Object(de.e)(e),price:Object(ue.qb)(e)}},Ta)(Da),La=n(650),Ma=n.n(La),_a=n(312),za=n.n(_a);function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var Ha=function(e){return e?e.childOfGroup&&e.listIndexText?null:e.titleCounterIcon||"arrow":null},Wa=c.c.div.withConfig({displayName:"StickyHeaderContainer__Wrapper",componentId:"sc-1tjdqrs-0"})(["position:absolute;top:0;left:0;width:100%;z-index:",";",";"],ye.j.level3,function(e){return e.isVisible?"":"pointer-events: none;"}),Ka=h.a?0:300,qa=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(t){function o(e){var t;return je()(this,o),(t=Ie()(this,Re()(o).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),t.shouldRender=!1,t.updateState=za.a.apply(void 0,[t.updateState].concat(n)),t}return Te()(o,t),Se()(o,[{key:"componentWillReceiveProps",value:function(e){this.shouldRender=!1,this.updateState(e)}},{key:"componentWillUnmount",value:function(){this.updateState.cancel()}},{key:"updateState",value:function(e){this.shouldRender=!0,this.setState(e)}},{key:"shouldComponentUpdate",value:function(){return this.shouldRender}},{key:"render",value:function(){return a.a.createElement(e,this.state)}}]),o}(i.Component)}(Ma.a,Ka,{}),Ya=Object(ve.withBreakpoint)(Object(o.b)(function(e,t){var n=Object(wa.a)(e),o=Object(ae.k)(e),i=Object(r.j)()&&o,a=!n&&Object(ae.h)(e)&&"sm"!==t.breakpoint&&!i,c=!n&&Object(ae.i)(e)&&!i,l=a?Object(ae.z)(e):null,s=c?Object(ae.A)(e):null,u=Ha(s),p=Ha(l);return{groupHeaderVisible:c,groupTitle:s&&s.title,groupHeaderIcon:u,groupHeaderCounter:s&&s.listIndexText,groupHeaderImage:Oa(s),questionHeaderVisible:a,questionTitle:l&&l.title,questionHeaderIcon:p,questionHeaderCounter:l&&l.listIndexText,contextBackgroundColor:Object(de.a)(e),contentColor:Object(de.c)(e),counterColor:Object(de.d)(e),oldLayout:!0,isBlockChanging:Object(ae.g)(e),activeBlockRef:l?l.ref:null,groupBlock:s}})(function(e){var t=e.isBlockChanging,n=e.questionHeaderVisible,o=e.questionTitle,r=e.groupHeaderVisible,c=e.groupTitle,l=e.activeBlockRef,s=C()(e,["isBlockChanging","questionHeaderVisible","questionTitle","groupHeaderVisible","groupTitle","activeBlockRef"]),u=Object(i.useState)(!1),p=d()(u,2),h=p[0],m=p[1];Object(i.useEffect)(function(){if(!t){var e=setTimeout(function(){return m(!1)},Ka);return function(){return clearTimeout(e)}}m(!0)},[t]);var f=!h&&!t&&(r||n);return a.a.createElement(Wa,{"data-qa-stickyheader-visible":f,"data-qa-stickyheader-blockRef":l,isVisible:!h&&!t&&(r||n)},a.a.createElement(qa,O()({questionHeaderVisible:n&&!h&&!t,groupHeaderVisible:r,questionHeaderContent:o&&Object(T.a)(o),groupHeaderContent:c&&Object(T.a)(c)},s)))})),Ua=n(86),Ga=n(201),Qa=n.n(Ga),Xa=n(648),Za=n.n(Xa),Ja=n(241),$a=n(222),ec=g()(Qa.a)(function(e){return function(){window.open(e,"_blank")}}),tc=Object(Ja.a)(Object(o.b)(function(e,t){var n=Object(wa.e)(e),o=Object(pe.a)(e)(window.location.hostname,"typeform-footer"),i=Object(ce.i)(e),a=Object(ce.h)(e);return{answeredText:t.t("label.progress.proportion",{step:i,total:a}),brandButtonOnClick:ec(o),brandButtonText:Object(T.a)(t.t("label.branding.poweredby")),buttonsColor:Object(de.b)(e),contextBackgroundColor:Object(de.a)(e),dataQa:"fixed-footer",nextButtonDisabled:!Object($a.a)(e),percentageText:t.t("label.progress.percent",{percent:Math.round(100*i/a)}),previousButtonDisabled:!Object($a.b)(e),progressBackgroundColor:Object(de.a)(e),progressColor:Object(de.d)(e),progressCompletedAmount:Object(ce.i)(e),progressTotalAmount:Object(ce.h)(e),progressType:Object(ae.u)(e),transparentButtons:Object(de.f)(e),visible:!Object(r.j)()||!Object(ae.k)(e),withBackground:!n,withBranding:Object(ae.y)(e),withNavigationArrows:!n,withProgress:!n&&!Object(ae.m)(e)}},function(e){return{nextButtonOnClick:function(){e(u.h()),Object(Hi.a)("changeBlock",{direction:"next",method:"footerArrow"})},previousButtonOnClick:function(){e(u.j()),Object(Hi.a)("changeBlock",{direction:"previous",method:"footerArrow"})}}})(Za.a)),nc=n(240),oc=n.n(nc),rc=n(214),ic=n.n(rc),ac=n(221),cc=c.c.div.withConfig({displayName:"StickyFooter__CommitButtonWrapper",componentId:"sc-1ud3eur-0"})(["display:flex;align-items:center;"]),lc=c.c.div.withConfig({displayName:"StickyFooter__StickyFooterPlaceholder",componentId:"sc-1ud3eur-1"})(["position:absolute;width:100%;overflow:hidden;height:","px;bottom:","px;z-index:",";opacity:",";visibility:",";"],56,ye.d,function(e){return e.isActive?ye.j.level3:ye.j.level0},function(e){return e.isActive?"1":"0"},function(e){return e.isActive?"visible":"hidden"}),sc=c.c.div.withConfig({displayName:"StickyFooter__StickyFooterWrapper",componentId:"sc-1ud3eur-2"})(["display:flex;align-items:center;justify-content:space-between;border-top:1px solid;height:","px;background-color:",";border-color:",";"],function(e){return e.height},function(e){return Object(r.r)(Object(r.l)(e.contextBackgroundColor,e.color,.2))},function(e){return Object(r.l)(e.contextBackgroundColor,e.color,.3)}),uc=function(e){function t(e){var n;return je()(this,t),(n=Ie()(this,Re()(t).call(this,e))).handleCommit=n.handleCommit.bind(De()(n)),n}return Te()(t,e),Se()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.show!==e.show}},{key:"handleCommit",value:function(){this.props.onCommitAnswer(this.props.blockRef,ac.a)}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.theme,o=e.t,i=e.breakpoint,c=e.buttonText,l=e.showButtonIcon;if(!e.isEnabled)return null;var s="sm"===i,u=s||Object(r.j)()?"":Object(T.a)(o("label.buttonHint.default"));return a.a.createElement(lc,{isActive:t},a.a.createElement(R.a,{type:"slideUp",isVisible:t},a.a.createElement(sc,{height:56,contextBackgroundColor:n.colors.background,color:n.colors.secondary,"data-qa":"sticky-footer","data-qa-visible":t},a.a.createElement(at.a,null,a.a.createElement(cc,null,a.a.createElement(ic.a,{fullWidth:s,onClick:this.handleCommit,iconSvg:l?z.a:null,size:"medium",color:n.colors.button,contextBackgroundColor:n.colors.background,transparent:n.hasTransparentButton,dataQa:"sticky-footer-button"},o(c)),u&&a.a.createElement(I.a,{left:2},a.a.createElement(oc.a,{text:u,color:n.colors.secondary})))))))}}]),t}(i.Component);uc.defaultProps={t:function(e){return e},buttonText:"label.button.ok",showButtonIcon:!0,isEnabled:!0,theme:{colors:{background:r.b,button:r.b,secondary:r.b}}};var pc=Object(ve.withBreakpoint)(Object(N.a)(uc)),dc={onCommitAnswer:u.c},hc=Object(o.b)(function(e){var t=Object(ae.w)(e),n=Object(le.d)(e,t);if(!n)return{show:!1,theme:Object(de.e)(e)};var o=Object(r.j)()&&Object(ae.k)(e);return{blockRef:t,show:!Object(wa.e)(e)&&!o,theme:Object(de.e)(e),buttonText:n.buttonText,showButtonIcon:!Object(le.g)(n),isEnabled:Object(r.j)()}},dc)(pc);function mc(e){var t=e.enabled;return Object(i.useEffect)(function(){var e=function(e){if(t)return e.preventDefault(),e.returnValue="",""};return Zo.b.addEventListener("beforeunload",e,!0),function(){return Zo.b.removeEventListener("beforeunload",e,!0)}},[t]),null}var fc=c.c.div.withConfig({displayName:"Form__Root",componentId:"sc-18c4ntz-0"})(["height:100%;overflow:hidden;"]),bc=c.c.div.withConfig({displayName:"Form__FooterWrapper",componentId:"sc-18c4ntz-1"})(["position:absolute;opacity:inherit;right:0;left:0;bottom:0;z-index:10;pointer-events:none;"]),vc=function(e){var t=e.isLivePreview,n=e.submit,o=void 0===n?{}:n,r=e.showBlockList,c=e.layoutItemsSize,l=e.hasBlocksWithAnswer,s=e.isThankYouScreenActive,u=e.showWelcomeScreen,p=e.isInlineSubmitEnabled,d=Object(Ua.a)(),m=!t&&!d&&!(o.isComplete&&o.isSuccess)&&l;return Object(i.useEffect)(function(){setTimeout(function(){e.appScroll()},600)},[r]),d&&u?null:a.a.createElement(fc,null,a.a.createElement(Ya,null),!s&&a.a.createElement(ja,{component:Ni,isVisible:r,layoutItemsSize:c}),!p&&a.a.createElement(Ba,{isVisible:r}),a.a.createElement(hc,null),a.a.createElement(R.a,{isVisible:r,type:"fade",duration:h.a?0:500,delay:h.a?0:300},a.a.createElement(bc,null,a.a.createElement(tc,null))),a.a.createElement(mc,{enabled:m}))};vc.defaultProps={submit:{},layoutItemsSize:{}};var gc=vc,yc=n(27),kc={appScroll:u.a};t.default=Object(o.b)(function(e){return{isLivePreview:Object(ae.l)(e),submit:Object(se.g)(e),theme:e.form.theme,showBlockList:!Object(yc.b)(e)&&!Object(yc.a)(e),isFooterVisible:!Object(r.j)()||!Object(ae.k)(e),hasBlocksWithAnswer:Object(ce.l)(e),isThankYouScreenActive:Object(yc.a)(e),showWelcomeScreen:Object(yc.b)(e),isInlineSubmitEnabled:Object(ae.j)(e)}},kc)(gc)}}]);